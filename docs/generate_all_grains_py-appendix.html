<!DOCTYPE html>
<html>
<head>
   <title>Introduction &gt; Appendix &gt; Python Scripts &gt; generate_all_grains.py</title>
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />   
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta name="description" content="Script Command Line: py generate_all_grains.py Z:\EmulatRAppUni\grainFactoryLib\GrainMaster.tsv Z:\EmulatRAppUni" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <link type="text/css" href="custom.css" rel="stylesheet" />

   <style TYPE="text/css" media="screen"> 
      html, body { margin:0; 
        padding:0; 
        background: #ffffff; 
      } 
      div#printheader { display: none; }
      #idheader { 
        width:100%; 
        min-height: 60px; 
        padding: 0; 
        margin: 0;
        position: fixed;
        top: 0;
        background: #2C5D88;
        z-index: 2;
      } 
      /* The "min-height" for "#idheader table" ensures that the (blue) header of the topic
         has at least the same height as the header of the navigation panel left of it */
      #idheader table { min-height: 59px;}             
      #idheader h1 span { color: #FFF }     
      #idnav {
        text-align: right;
        width: 126px;
        vertical-align: middle;        
      } 
      #idnav a { text-decoration: none }
      #idnav span {
        display: inline-block;
        width: 24px;
        height: 24px;
        margin-left: 4px;
        background:url('hm_webhelp_buttons_grey.png') top left no-repeat;
      } 
      #idnav a span {
        background-image:url('hm_webhelp_buttons_white.png');
      } 
      #idnav a span:hover {
        background-image:url('hm_webhelp_buttons_orange.png');
      } 
      #idnav span.hmbtnprev { background-position: 0 -32px }
      #idnav span.hmbtnnext { background-position: -24px -32px }
      #idnav span.hmbtntop  { background-position: -48px -32px }
      #idnav span.hmbtntoggle  { width: 20px; background-position: -70px -32px }
      #idnav span.hmbtnprint  { background-position: -88px -32px }

      #callout-table, #overview-table {display:block; position:relative; top:0; left:0;}
      #callout-icon {display:block; position:absolute; top:-11px; left:-11px;}
      #callout-icon-flag {display:block; position:absolute; top:-11px; left:-8px;}
      #callout-table a {text-decoration: none; color: blue;}
      #callout-table a:visited {text-decoration: none; color: blue;}
      #overview-table a {text-decoration: none; color: black;}
      #overview-table a:visited {text-decoration: none; color: black;}
      #callout-table a:hover, #overview-table a:hover {text-decoration: underline;}       
      p.help-url { margin: 20px 0 5px 0; text-align: center; }
	  p.help-url a:link { font-size: 50%; text-decoration: none; color: black; }
	  p.help-url a:visited { color: black; }
	  p.help-url a:hover { font-size: 95%; text-decoration: underline; }
      #switchtoggles { text-align: right; padding: 0 2px 0 0; font-size: 90%; } 
      .sync-toc { color: #FFF; font-size: 8pt; font-weight: bold; display: none; }
      .sync-toc a { color: #FFF; text-decoration: none; font-weight: bold;}
      .sync-toc a:visited { color: #FFF; }
      .sync-toc a:hover { text-decoration: underline; }
	  a#printbuttonlink { cursor: pointer; }
      a.hmanchor { display: inline-block; margin-top: -4em; padding-top: 4em; }  
   </style>
   <style TYPE="text/css" media="print">
      div#idheader, img.dropdown-toggle-icon, p.help-url { display:none } 
   </style>
   
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "generate_all_grains_py-appendix.html");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>


<div id="printheader"><h1 class="p_Heading1" style="page-break-after: avoid;"><span class="f_Heading1">generate_all_grains.py</span></h1>
</div>
<div id="idheader">
<div id="idheaderbg">
<table style="width:100%;border:none;margin:0px;" cellspacing="0" cellpadding="0"> 
  <tr>
    <td class="topichead" style="text-align:left; vertical-align:middle">
      <p class="sync-toc">&lt;&lt; <a rel="nofollow" href="index.html?generate_all_grains_py-appendix.html" target="_top">Click to Display Table of Contents</a> &gt;&gt;</p>
      <p class="crumbs"><b>Navigation:</b>&nbsp;
      
      <a href="introduction.html">Introduction</a> &gt; <a href="appendix---trait-examples.html">Appendix</a> &gt; <a href="python-scripts.html">Python Scripts</a>&nbsp;&gt;</p>
   
      <h1 class="p_Heading1" style="page-break-after: avoid;"><span class="f_Heading1">generate_all_grains.py</span></h1>

    </td>
    <td class="topichead" id="idnav">
      
      <a href="python-scripts.html" title="Previous Topic"><span class="hmbtnprev"></span></a>
      <a href="python-scripts.html" title="Parent Chapter"><span class="hmbtntop"></span></a>
      <a href="generate_cmakelists_py-appendix.html" title="Next Topic"><span class="hmbtnnext"></span></a>
      
    </td>
  </tr>  
</table>
</div>
</div>  

<div id="idcontent"><div id="innerdiv">
<!-- Ask Internet Explorer 6.users to update their obsolete and dangerous browser --> 
<!--[if lt IE 7]><div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;'><a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode"><img src="http://storage.ie6countdown.com/assets/100/images/banners/warning_bar_0000_us.jpg" border="0" height="42" width="820" alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today." /></a></div><![endif]-->

<!--ZOOMRESTART-->
<p class="p_Normal"><span style="font-weight: bold;">Script Command Line: </span>py generate_all_grains.py Z:\EmulatRAppUni\grainFactoryLib\GrainMaster.tsv Z:\EmulatRAppUni</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">&nbsp;</p>
<hr style="height:1px; color:#000000; border-width:0; background-color:#000000;" /><p class="p_CodeExample"><span class="f_CodeExample">#!/usr/bin/env&nbsp;python3</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">generate_all_grains.py&nbsp;-&nbsp;Generate&nbsp;Alpha&nbsp;AXP&nbsp;instruction&nbsp;grain&nbsp;files&nbsp;from&nbsp;GrainMaster.tsv</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">Copyright&nbsp;(c)&nbsp;2025&nbsp;Timothy&nbsp;Peer&nbsp;/&nbsp;eNVy&nbsp;Systems,&nbsp;Inc.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">Non-Commercial&nbsp;Use&nbsp;Only.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">import&nbsp;csv</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">import&nbsp;sys</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">from&nbsp;pathlib&nbsp;import&nbsp;Path</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">from&nbsp;datetime&nbsp;import&nbsp;datetime</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;Configuration</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">def&nbsp;get_copyright_header(filename,&nbsp;description):</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Generate&nbsp;copyright&nbsp;header&nbsp;with&nbsp;actual&nbsp;filename&nbsp;and&nbsp;description.&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;f&quot;&quot;&quot;//&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;{filename}&nbsp;-&nbsp;{description}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;Project:&nbsp;ASA-EMulatR&nbsp;-&nbsp;Alpha&nbsp;AXP&nbsp;Architecture&nbsp;Emulator</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;Copyright&nbsp;(C)&nbsp;2025&nbsp;eNVy&nbsp;Systems,&nbsp;Inc.&nbsp;All&nbsp;rights&nbsp;reserved.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;Licensed&nbsp;under&nbsp;eNVy&nbsp;Systems&nbsp;Non-Commercial&nbsp;License&nbsp;v1.1</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;Project&nbsp;Architect:&nbsp;Timothy&nbsp;Peer</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;AI&nbsp;Code&nbsp;Generation:&nbsp;Claude&nbsp;(Anthropic)&nbsp;/&nbsp;ChatGPT&nbsp;(OpenAI)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;Commercial&nbsp;use&nbsp;prohibited&nbsp;without&nbsp;separate&nbsp;license.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;Contact:&nbsp;peert@envysys.com&nbsp;|&nbsp;https://envysys.com</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;Documentation:&nbsp;https://timothypeer.github.io/ASA-EMulatR-Project/</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;============================================================================&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">BASE_INCLUDE_PATH&nbsp;=&nbsp;&quot;grainFactoryLib/grains&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;Box-specific&nbsp;directories</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">BOX_DIRECTORIES&nbsp;=&nbsp;{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;'EBox':&nbsp;'generated/Integer',</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;'FBox':&nbsp;'generated/FloatingPoint',</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;'MBox':&nbsp;'generated/Memory',</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;'CBox':&nbsp;'generated/Branch',</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;'PalBox':&nbsp;'generated/PAL',</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;Box-specific&nbsp;headers</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">BOX_HEADERS&nbsp;=&nbsp;{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;'EBox':&nbsp;'EBoxLib/EBoxBase.h',</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;'FBox':&nbsp;'FBoxLib/FBoxBase.h',</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;'MBox':&nbsp;'MBoxLib_EV6/MBoxBase.h',</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;'CBox':&nbsp;'CBoxLib/CBoxBase.h',</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;'PalBox':&nbsp;'palBoxLib/PalBoxBase.h',</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;Instruction&nbsp;Format&nbsp;Detection</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">def&nbsp;get_instruction_format(opcode_hex,&nbsp;mnemonic,&nbsp;box):</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;Determine&nbsp;instruction&nbsp;format&nbsp;based&nbsp;on&nbsp;opcode.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;Returns&nbsp;GrainFlags&nbsp;format&nbsp;constant.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Convert&nbsp;hex&nbsp;string&nbsp;to&nbsp;integer</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;opcode&nbsp;=&nbsp;int(opcode_hex,&nbsp;16)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Operate&nbsp;format&nbsp;-&nbsp;Integer&nbsp;arithmetic/logical</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;opcode&nbsp;in&nbsp;[0x10,&nbsp;0x11,&nbsp;0x12,&nbsp;0x13]:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;GF_OperateFormat&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Operate&nbsp;format&nbsp;-&nbsp;Floating&nbsp;point&nbsp;arithmetic</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;opcode&nbsp;in&nbsp;[0x14,&nbsp;0x15,&nbsp;0x16,&nbsp;0x17]:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;GF_OperateFormat&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Operate&nbsp;format&nbsp;-&nbsp;Byte&nbsp;manipulation</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;opcode&nbsp;==&nbsp;0x1C:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;GF_OperateFormat&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Memory&nbsp;format&nbsp;-&nbsp;Integer&nbsp;loads</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;opcode&nbsp;in&nbsp;[0x0A,&nbsp;0x0B,&nbsp;0x28,&nbsp;0x29,&nbsp;0x2A,&nbsp;0x2B,&nbsp;0x2C,&nbsp;0x2D,&nbsp;0x2E,&nbsp;0x2F]:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;GF_MemoryFormat&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Memory&nbsp;format&nbsp;-&nbsp;Integer&nbsp;stores</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;opcode&nbsp;in&nbsp;[0x0C,&nbsp;0x0D,&nbsp;0x0E,&nbsp;0x0F]:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;GF_MemoryFormat&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Memory&nbsp;format&nbsp;-&nbsp;FP&nbsp;loads</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;opcode&nbsp;in&nbsp;[0x20,&nbsp;0x21,&nbsp;0x22,&nbsp;0x23]:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;GF_MemoryFormat&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Memory&nbsp;format&nbsp;-&nbsp;FP&nbsp;stores</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;opcode&nbsp;in&nbsp;[0x24,&nbsp;0x25,&nbsp;0x26,&nbsp;0x27]:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;GF_MemoryFormat&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Memory&nbsp;format&nbsp;-&nbsp;LDA/LDAH&nbsp;(address&nbsp;calculation)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;opcode&nbsp;in&nbsp;[0x08,&nbsp;0x09]:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;GF_MemoryFormat&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Branch&nbsp;format&nbsp;-&nbsp;Unconditional</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;opcode&nbsp;in&nbsp;[0x30,&nbsp;0x34]:&nbsp;&nbsp;#&nbsp;BR,&nbsp;BSR</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;GF_BranchFormat&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Branch&nbsp;format&nbsp;-&nbsp;Conditional&nbsp;integer</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;opcode&nbsp;in&nbsp;[0x38,&nbsp;0x39,&nbsp;0x3A,&nbsp;0x3B,&nbsp;0x3C,&nbsp;0x3D,&nbsp;0x3E,&nbsp;0x3F]:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;GF_BranchFormat&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Branch&nbsp;format&nbsp;-&nbsp;Conditional&nbsp;FP</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;opcode&nbsp;in&nbsp;[0x31,&nbsp;0x32,&nbsp;0x33,&nbsp;0x35,&nbsp;0x36,&nbsp;0x37]:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;GF_BranchFormat&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Jump&nbsp;format&nbsp;(treat&nbsp;as&nbsp;branch&nbsp;for&nbsp;dest&nbsp;register&nbsp;purposes)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;opcode&nbsp;==&nbsp;0x1A:&nbsp;&nbsp;#&nbsp;JMP,&nbsp;JSR,&nbsp;RET,&nbsp;JSR_COROUTINE</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;GF_BranchFormat&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;PAL&nbsp;format</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;opcode&nbsp;==&nbsp;0x00:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;GF_PALFormat&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Misc&nbsp;format</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;opcode&nbsp;==&nbsp;0x18:&nbsp;&nbsp;#&nbsp;MISC&nbsp;(TRAPB,&nbsp;EXCB,&nbsp;MB,&nbsp;WMB,&nbsp;FETCH,&nbsp;etc.)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;GF_MemoryFormat&quot;&nbsp;&nbsp;#&nbsp;Most&nbsp;MISC&nbsp;treated&nbsp;as&nbsp;memory&nbsp;ops</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;else:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;GF_None&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;Execution&nbsp;Flags&nbsp;Detection</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">def&nbsp;get_execution_flags(mnemonic,&nbsp;opcode_hex,&nbsp;box):</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;Determine&nbsp;execution&nbsp;characteristics.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;Returns&nbsp;list&nbsp;of&nbsp;GrainFlags&nbsp;execution&nbsp;flags.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;flags&nbsp;=&nbsp;[]</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Convert&nbsp;to&nbsp;uppercase&nbsp;for&nbsp;comparison</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;mnem&nbsp;=&nbsp;mnemonic.upper()</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Dual-issue&nbsp;capable&nbsp;instructions&nbsp;(simple&nbsp;ALU&nbsp;ops)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;dual_issue_ops&nbsp;=&nbsp;[</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'ADDL',&nbsp;'ADDQ',&nbsp;'SUBL',&nbsp;'SUBQ',&nbsp;'S4ADDL',&nbsp;'S4ADDQ',&nbsp;'S8ADDL',&nbsp;'S8ADDQ',</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'S4SUBL',&nbsp;'S4SUBQ',&nbsp;'S8SUBL',&nbsp;'S8SUBQ',</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'AND',&nbsp;'BIS',&nbsp;'XOR',&nbsp;'BIC',&nbsp;'ORNOT',&nbsp;'EQV',</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'CMPEQ',&nbsp;'CMPLT',&nbsp;'CMPLE',&nbsp;'CMPULT',&nbsp;'CMPULE',</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'SLL',&nbsp;'SRL',&nbsp;'SRA',</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'ZAP',&nbsp;'ZAPNOT',&nbsp;'EXTBL',&nbsp;'EXTWL',&nbsp;'EXTLL',&nbsp;'EXTQL',</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'INSBL',&nbsp;'INSWL',&nbsp;'INSLL',&nbsp;'INSQL',</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'MSKBL',&nbsp;'MSKWL',&nbsp;'MSKLL',&nbsp;'MSKQL',</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'LDA',&nbsp;'LDAH',&nbsp;&nbsp;#&nbsp;Address&nbsp;computation</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;]</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;mnem&nbsp;in&nbsp;dual_issue_ops:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flags.append('GF_CanDualIssue')</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Instructions&nbsp;that&nbsp;need&nbsp;pipeline&nbsp;stalls</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;stall_ops&nbsp;=&nbsp;[</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'TRAPB',&nbsp;'EXCB',&nbsp;'MB',&nbsp;'WMB',&nbsp;'RC',&nbsp;'RS',</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'HW_REI',&nbsp;'HW_RET',&nbsp;&nbsp;#&nbsp;PAL&nbsp;ops</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;]</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;mnem&nbsp;in&nbsp;stall_ops:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flags.append('GF_NeedsStall')</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;flags</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;Latency&nbsp;Tables</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">def&nbsp;get_latency(mnemonic,&nbsp;opcode_hex,&nbsp;box):</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;instruction&nbsp;latency&nbsp;in&nbsp;cycles&nbsp;(EV6/21264&nbsp;timings).</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;opcode&nbsp;=&nbsp;int(opcode_hex,&nbsp;16)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;mnem&nbsp;=&nbsp;mnemonic.upper()</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Integer&nbsp;multiply:&nbsp;7&nbsp;cycles</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;mnem&nbsp;in&nbsp;['MULL',&nbsp;'MULQ',&nbsp;'UMULH']:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;mnem&nbsp;==&nbsp;'UMULH':</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;14&nbsp;&nbsp;#&nbsp;High&nbsp;multiply&nbsp;takes&nbsp;longer</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;7</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Integer&nbsp;loads:&nbsp;3&nbsp;cycles&nbsp;(to&nbsp;use,&nbsp;can&nbsp;forward&nbsp;earlier)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;opcode&nbsp;in&nbsp;[0x0A,&nbsp;0x0B,&nbsp;0x28,&nbsp;0x29,&nbsp;0x2A,&nbsp;0x2B,&nbsp;0x2C,&nbsp;0x2D,&nbsp;0x2E,&nbsp;0x2F]:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;3</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;FP&nbsp;loads:&nbsp;4&nbsp;cycles</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;opcode&nbsp;in&nbsp;[0x20,&nbsp;0x21,&nbsp;0x22,&nbsp;0x23]:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;4</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Stores:&nbsp;1&nbsp;cycle&nbsp;(to&nbsp;store&nbsp;buffer)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;opcode&nbsp;in&nbsp;[0x0C,&nbsp;0x0D,&nbsp;0x0E,&nbsp;0x0F,&nbsp;0x24,&nbsp;0x25,&nbsp;0x26,&nbsp;0x27]:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;FP&nbsp;arithmetic&nbsp;(most&nbsp;ops):&nbsp;6&nbsp;cycles</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;opcode&nbsp;in&nbsp;[0x15,&nbsp;0x16,&nbsp;0x17]:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;mnem.startswith('DIV'):</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;63&nbsp;&nbsp;#&nbsp;FP&nbsp;divide</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;mnem.startswith('SQRT'):</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;70&nbsp;&nbsp;#&nbsp;FP&nbsp;square&nbsp;root</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;6&nbsp;&nbsp;#&nbsp;FADD,&nbsp;FSUB,&nbsp;FMUL,&nbsp;FCMP</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;FP&nbsp;conversions:&nbsp;10&nbsp;cycles</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;opcode&nbsp;==&nbsp;0x14&nbsp;or&nbsp;opcode&nbsp;==&nbsp;0x1C:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;mnem&nbsp;in&nbsp;['CVTQS',&nbsp;'CVTQT',&nbsp;'CVTTS',&nbsp;'CVTTQ']:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;10</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Branches:&nbsp;1&nbsp;cycle&nbsp;(misprediction&nbsp;penalty&nbsp;handled&nbsp;elsewhere)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;box&nbsp;==&nbsp;'CBox':</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Most&nbsp;other&nbsp;instructions:&nbsp;1&nbsp;cycle</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;else:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;Throughput</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">def&nbsp;get_throughput(mnemonic,&nbsp;opcode_hex):</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;throughput&nbsp;(instructions&nbsp;per&nbsp;cycle).</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;Most&nbsp;Alpha&nbsp;instructions:&nbsp;1&nbsp;per&nbsp;cycle.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;Some&nbsp;complex&nbsp;ops&nbsp;may&nbsp;be&nbsp;lower.</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;mnem&nbsp;=&nbsp;mnemonic.upper()</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Low&nbsp;throughput&nbsp;ops&nbsp;(less&nbsp;than&nbsp;1&nbsp;per&nbsp;cycle)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;mnem&nbsp;in&nbsp;['MULL',&nbsp;'MULQ',&nbsp;'UMULH',&nbsp;'DIVS',&nbsp;'DIVT',&nbsp;'SQRTS',&nbsp;'SQRTT']:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1&nbsp;&nbsp;#&nbsp;Simplified&nbsp;-&nbsp;still&nbsp;show&nbsp;as&nbsp;1</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;Template&nbsp;Generator&nbsp;(Updated)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">def&nbsp;sanitize_mnemonic(mnemonic):</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Convert&nbsp;mnemonic&nbsp;to&nbsp;valid&nbsp;C++&nbsp;identifier&nbsp;(replace&nbsp;special&nbsp;chars).&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;mnemonic.replace('/',&nbsp;'_').replace('-',&nbsp;'_')</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">def&nbsp;generate_header_guard(mnemonic):</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Generate&nbsp;header&nbsp;guard&nbsp;name.&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;f&quot;{sanitize_mnemonic(mnemonic).upper()}_INSTRUCTIONGRAIN_H&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">def&nbsp;get_grain_class_name(mnemonic):</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Generate&nbsp;grain&nbsp;class&nbsp;name.&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;f&quot;{sanitize_mnemonic(mnemonic)}_InstructionGrain&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">def&nbsp;get_grain_filename(mnemonic):</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Generate&nbsp;grain&nbsp;filename.&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;f&quot;{sanitize_mnemonic(mnemonic)}_InstructionGrain.h&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">def&nbsp;get_execute_method_name(box,&nbsp;mnemonic):</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Generate&nbsp;execute&nbsp;method&nbsp;name&nbsp;for&nbsp;the&nbsp;box.&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;f&quot;execute{sanitize_mnemonic(mnemonic)}&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">def&nbsp;get_box_member_name(box):</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Get&nbsp;box&nbsp;member&nbsp;variable&nbsp;name&nbsp;(e.g.,&nbsp;EBox&nbsp;-&gt;&nbsp;m_eBox).&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;f&quot;m_{box[0].lower()}{box[1:]}&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">def&nbsp;generate_grain_flags(grain):</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Generate&nbsp;complete&nbsp;flags&nbsp;expression&nbsp;for&nbsp;constructor.&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;opcode&nbsp;=&nbsp;grain['Opcode']</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;mnemonic&nbsp;=&nbsp;grain['Mnemonic']</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;box&nbsp;=&nbsp;grain['Box']</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Get&nbsp;format&nbsp;flag</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;format_flag&nbsp;=&nbsp;get_instruction_format(opcode,&nbsp;mnemonic,&nbsp;box)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Get&nbsp;execution&nbsp;flags</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;exec_flags&nbsp;=&nbsp;get_execution_flags(mnemonic,&nbsp;opcode,&nbsp;box)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Combine&nbsp;flags</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;all_flags&nbsp;=&nbsp;[format_flag]&nbsp;+&nbsp;exec_flags</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Remove&nbsp;GF_None&nbsp;if&nbsp;other&nbsp;flags&nbsp;present</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;len(all_flags)&nbsp;&gt;&nbsp;1&nbsp;and&nbsp;'GF_None'&nbsp;in&nbsp;all_flags:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;all_flags.remove('GF_None')</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Return&nbsp;combined&nbsp;expression</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;len(all_flags)&nbsp;==&nbsp;0&nbsp;or&nbsp;(len(all_flags)&nbsp;==&nbsp;1&nbsp;and&nbsp;all_flags[0]&nbsp;==&nbsp;'GF_None'):</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'GF_None'</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;else:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'&nbsp;|&nbsp;'.join(all_flags)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">def&nbsp;generate_grain_template(grain,&nbsp;box_dir):</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Generate&nbsp;complete&nbsp;grain&nbsp;header&nbsp;file&nbsp;content.&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;opcode&nbsp;=&nbsp;grain['Opcode']</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;=&nbsp;grain['Function']</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;mnemonic&nbsp;=&nbsp;grain['Mnemonic']</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;description&nbsp;=&nbsp;grain['Description']</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;box&nbsp;=&nbsp;grain['Box']</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;grain_type&nbsp;=&nbsp;grain['Type']</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;class_name&nbsp;=&nbsp;get_grain_class_name(mnemonic)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;header_guard&nbsp;=&nbsp;generate_header_guard(mnemonic)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;box_header&nbsp;=&nbsp;BOX_HEADERS[box]</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;execute_method&nbsp;=&nbsp;get_execute_method_name(box,&nbsp;mnemonic)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;filename&nbsp;=&nbsp;get_grain_filename(mnemonic)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;box_member&nbsp;=&nbsp;get_box_member_name(box)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Generate&nbsp;flags,&nbsp;latency,&nbsp;throughput</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;flags&nbsp;=&nbsp;generate_grain_flags(grain)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;latency&nbsp;=&nbsp;get_latency(mnemonic,&nbsp;opcode,&nbsp;box)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;throughput&nbsp;=&nbsp;get_throughput(mnemonic,&nbsp;opcode)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Generate&nbsp;copyright&nbsp;with&nbsp;actual&nbsp;filename&nbsp;and&nbsp;description</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;copyright&nbsp;=&nbsp;get_copyright_header(filename,&nbsp;f&quot;{mnemonic}&nbsp;Instruction&nbsp;Grain&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;template&nbsp;=&nbsp;f&quot;&quot;&quot;{copyright}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;&nbsp;Instruction:&nbsp;{mnemonic}&nbsp;-&nbsp;{description}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;&nbsp;Opcode:&nbsp;{opcode},&nbsp;Function:&nbsp;{function}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;&nbsp;Execution&nbsp;Box:&nbsp;{box}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;&nbsp;Format:&nbsp;{get_instruction_format(opcode,&nbsp;mnemonic,&nbsp;box)}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;&nbsp;Latency:&nbsp;{latency}&nbsp;cycles,&nbsp;Throughput:&nbsp;{throughput}/cycle</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;&nbsp;Generated:&nbsp;{datetime.now().strftime('%Y-%m-%d&nbsp;%H:%M:%S')}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#ifndef&nbsp;{header_guard}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#define&nbsp;{header_guard}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#include&nbsp;&quot;coreLib/Axp_Attributes_core.h&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#include&nbsp;&quot;{box_header}&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#include&nbsp;&quot;grainFactoryLib/InstructionGrain.h&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#include&nbsp;&quot;grainFactoryLib/InstructionGrainRegistry.h&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#include&nbsp;&quot;grainFactoryLib/executionBoxDecoder_inl.h&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#include&nbsp;&quot;machineLib/PipeLineSlot.h&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;{mnemonic}&nbsp;Instruction&nbsp;Grain</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">class&nbsp;{class_name}&nbsp;:&nbsp;public&nbsp;InstructionGrain</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">{{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">public:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;{class_name}()</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;InstructionGrain(</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;rawBits&nbsp;(updated&nbsp;per-fetch)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{flags},&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;flags</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{latency},&nbsp;&nbsp;&nbsp;//&nbsp;latency&nbsp;(cycles)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{throughput}&nbsp;//&nbsp;throughput&nbsp;(instructions/cycle)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;,&nbsp;m_mnemonic(&quot;{mnemonic}&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;,&nbsp;m_opcode({opcode})</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;,&nbsp;m_functionCode({function})</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;,&nbsp;m_platform(GrainPlatform::Alpha)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;{{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;}}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;========================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Virtual&nbsp;Method&nbsp;Implementations</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;========================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;AXP_HOT&nbsp;AXP_ALWAYS_INLINE</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;execute(PipelineSlot&amp;&nbsp;slot)&nbsp;const&nbsp;noexcept&nbsp;override</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;{{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Delegate&nbsp;to&nbsp;execution&nbsp;box&nbsp;via&nbsp;slot&nbsp;member</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot.{box_member}-&gt;{execute_method}(slot);</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;}}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;AXP_HOT&nbsp;AXP_ALWAYS_INLINE</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;ExecutionBox&nbsp;executionBox()&nbsp;const&nbsp;noexcept</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;{{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;ExecutionBox::{box};</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;}}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;AXP_HOT&nbsp;AXP_ALWAYS_INLINE</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;GrainType&nbsp;grainType()&nbsp;const&nbsp;noexcept&nbsp;override</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;{{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;GrainType::{grain_type};</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;}}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;========================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Pure&nbsp;Virtual&nbsp;Accessor&nbsp;Implementations</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;========================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;AXP_HOT&nbsp;AXP_ALWAYS_INLINE</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;QString&nbsp;mnemonic()&nbsp;const&nbsp;noexcept&nbsp;override</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;{{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_mnemonic;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;}}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;AXP_HOT&nbsp;AXP_ALWAYS_INLINE</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;quint8&nbsp;opcode()&nbsp;const&nbsp;noexcept&nbsp;override</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;{{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_opcode;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;}}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;AXP_HOT&nbsp;AXP_ALWAYS_INLINE</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;quint16&nbsp;functionCode()&nbsp;const&nbsp;noexcept&nbsp;override</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;{{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_functionCode;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;}}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;AXP_HOT&nbsp;AXP_ALWAYS_INLINE</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;GrainPlatform&nbsp;platform()&nbsp;const&nbsp;noexcept&nbsp;override</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;{{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_platform;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;}}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">private:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;QString&nbsp;m_mnemonic;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;quint8&nbsp;m_opcode;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;quint16&nbsp;m_functionCode;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;GrainPlatform&nbsp;m_platform;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">}};</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;Auto-registration</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">namespace&nbsp;{{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;GrainAutoRegistrar&lt;{class_name}&gt;&nbsp;s_{sanitize_mnemonic(mnemonic).lower()}_registrar(</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{opcode},&nbsp;{function}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;);</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">}}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#endif&nbsp;//&nbsp;{header_guard}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;template</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;RegisterAllGrains.cpp&nbsp;Generator</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">def&nbsp;generate_registration_file(grains,&nbsp;output_dir):</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Generate&nbsp;RegisterAllGrains.cpp&nbsp;that&nbsp;includes&nbsp;all&nbsp;grain&nbsp;headers.&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Group&nbsp;by&nbsp;box</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;grains_by_box&nbsp;=&nbsp;{}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;grain&nbsp;in&nbsp;grains:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;box&nbsp;=&nbsp;grain['Box']</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;box&nbsp;not&nbsp;in&nbsp;grains_by_box:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grains_by_box[box]&nbsp;=&nbsp;[]</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grains_by_box[box].append(grain)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Generate&nbsp;copyright</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;copyright&nbsp;=&nbsp;get_copyright_header(&quot;RegisterAllGrains.cpp&quot;,&nbsp;&quot;Auto-Generated&nbsp;Grain&nbsp;Registration&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;content&nbsp;=&nbsp;f&quot;&quot;&quot;{copyright}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;&nbsp;Purpose:&nbsp;Include&nbsp;all&nbsp;instruction&nbsp;grain&nbsp;headers&nbsp;to&nbsp;force&nbsp;registration</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;&nbsp;Generated:&nbsp;{datetime.now().strftime('%Y-%m-%d&nbsp;%H:%M:%S')}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;&nbsp;DO&nbsp;NOT&nbsp;EDIT&nbsp;MANUALLY&nbsp;-&nbsp;changes&nbsp;will&nbsp;be&nbsp;overwritten</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#include&nbsp;&quot;grainFactoryLib/InstructionGrainRegistry.h&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#include&nbsp;&lt;QDebug&gt;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;Include&nbsp;all&nbsp;grain&nbsp;headers&nbsp;(triggers&nbsp;auto-registration)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;Total&nbsp;grains:&nbsp;{len(grains)}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Add&nbsp;includes&nbsp;organized&nbsp;by&nbsp;box</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;box&nbsp;in&nbsp;sorted(grains_by_box.keys()):</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;box_dir&nbsp;=&nbsp;BOX_DIRECTORIES[box]</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;box_grains&nbsp;=&nbsp;grains_by_box[box]</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content&nbsp;+=&nbsp;f&quot;\n//&nbsp;{box}&nbsp;Instructions&nbsp;({len(box_grains)}&nbsp;grains)\n&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;grain&nbsp;in&nbsp;sorted(box_grains,&nbsp;key=lambda&nbsp;g:&nbsp;g['Mnemonic']):</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mnemonic&nbsp;=&nbsp;grain['Mnemonic']</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filename&nbsp;=&nbsp;get_grain_filename(mnemonic)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;include&nbsp;=&nbsp;f&quot;{BASE_INCLUDE_PATH}/{box_dir}/{filename}&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content&nbsp;+=&nbsp;f'#include&nbsp;&quot;{include}&quot;\n'</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Add&nbsp;footer</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;content&nbsp;+=&nbsp;f&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;Force&nbsp;linker&nbsp;to&nbsp;include&nbsp;this&nbsp;translation&nbsp;unit</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">namespace&nbsp;{{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;GrainRegistrationForcer&nbsp;{{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GrainRegistrationForcer()&nbsp;{{</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;auto&amp;&nbsp;registry&nbsp;=&nbsp;InstructionGrainRegistry::instance();</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;qDebug()&nbsp;&lt;&lt;&nbsp;&quot;RegisterAllGrains:&nbsp;Loaded&quot;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;registry.grainCount()&nbsp;&lt;&lt;&nbsp;&quot;instruction&nbsp;grains&quot;;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;}};</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Static&nbsp;object&nbsp;instantiated&nbsp;before&nbsp;main()</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;GrainRegistrationForcer&nbsp;s_forcer;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">}}</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">//&nbsp;End&nbsp;of&nbsp;auto-generated&nbsp;file</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;output_file&nbsp;=&nbsp;output_dir&nbsp;/&nbsp;&quot;grainFactoryLib&quot;&nbsp;/&nbsp;&quot;RegisterAllGrains.cpp&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;output_file.parent.mkdir(parents=True,&nbsp;exist_ok=True)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;output_file.write_text(content,&nbsp;encoding='utf-8')</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;✓&nbsp;Generated:&nbsp;{output_file}&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;output_file</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;Main&nbsp;Generator</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">def&nbsp;read_tsv(tsv_file):</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Read&nbsp;GrainMaster.tsv&nbsp;and&nbsp;parse&nbsp;grain&nbsp;definitions.&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;grains&nbsp;=&nbsp;[]</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;open(tsv_file,&nbsp;'r',&nbsp;encoding='utf-8')&nbsp;as&nbsp;f:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reader&nbsp;=&nbsp;csv.DictReader(f,&nbsp;delimiter='\t')</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;row&nbsp;in&nbsp;reader:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Skip&nbsp;comment&nbsp;lines</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;row['Opcode'].startswith('#'):</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Parse&nbsp;opcode&nbsp;and&nbsp;function</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;opcode&nbsp;=&nbsp;row['Opcode'].strip()</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;=&nbsp;row['Function'].strip()</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grains.append({</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Opcode':&nbsp;opcode,</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Function':&nbsp;function,</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Mnemonic':&nbsp;row['Mnemonic'].strip(),</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Description':&nbsp;row['Description'].strip(),</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Type':&nbsp;row['Type'].strip(),</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Box':&nbsp;row['Box'].strip(),</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;(ValueError,&nbsp;KeyError)&nbsp;as&nbsp;e:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;Warning:&nbsp;Skipping&nbsp;invalid&nbsp;row:&nbsp;{row}&nbsp;({e})&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;grains</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">def&nbsp;generate_all_grains(tsv_file,&nbsp;output_dir):</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Main&nbsp;entry&nbsp;point&nbsp;-&nbsp;generate&nbsp;all&nbsp;grain&nbsp;files.&quot;&quot;&quot;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(&quot;=&quot;&nbsp;*&nbsp;80)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(&quot;Alpha&nbsp;AXP&nbsp;Grain&nbsp;Code&nbsp;Generator&nbsp;(with&nbsp;Base&nbsp;Constructor&nbsp;Initialization)&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(&quot;=&quot;&nbsp;*&nbsp;80)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Read&nbsp;TSV</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;\nReading:&nbsp;{tsv_file}&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;grains&nbsp;=&nbsp;read_tsv(tsv_file)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;Loaded&nbsp;{len(grains)}&nbsp;grain&nbsp;definitions&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Create&nbsp;output&nbsp;directories</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;Path(output_dir)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;box,&nbsp;box_dir&nbsp;in&nbsp;BOX_DIRECTORIES.items():</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_dir&nbsp;=&nbsp;output_dir&nbsp;/&nbsp;BASE_INCLUDE_PATH&nbsp;/&nbsp;box_dir</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full_dir.mkdir(parents=True,&nbsp;exist_ok=True)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Generate&nbsp;individual&nbsp;grain&nbsp;headers</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;\nGenerating&nbsp;grain&nbsp;headers&nbsp;with&nbsp;proper&nbsp;initialization...&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;generated_count&nbsp;=&nbsp;0</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;grain&nbsp;in&nbsp;grains:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;box&nbsp;=&nbsp;grain['Box']</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;box_dir&nbsp;=&nbsp;BOX_DIRECTORIES[box]</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mnemonic&nbsp;=&nbsp;grain['Mnemonic']</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Generate&nbsp;content</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content&nbsp;=&nbsp;generate_grain_template(grain,&nbsp;box_dir)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Write&nbsp;file</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filename&nbsp;=&nbsp;get_grain_filename(mnemonic)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_file&nbsp;=&nbsp;output_dir&nbsp;/&nbsp;BASE_INCLUDE_PATH&nbsp;/&nbsp;box_dir&nbsp;/&nbsp;filename</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_file.write_text(content,&nbsp;encoding='utf-8')</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generated_count&nbsp;+=&nbsp;1</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;generated_count&nbsp;%&nbsp;50&nbsp;==&nbsp;0:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;&nbsp;&nbsp;Generated&nbsp;{generated_count}/{len(grains)}&nbsp;grains...&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;✓&nbsp;Generated&nbsp;{generated_count}&nbsp;grain&nbsp;headers&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Generate&nbsp;RegisterAllGrains.cpp</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;\nGenerating&nbsp;registration&nbsp;file...&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;generate_registration_file(grains,&nbsp;output_dir)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(&quot;\n&quot;&nbsp;+&nbsp;&quot;=&quot;&nbsp;*&nbsp;80)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(&quot;GENERATION&nbsp;COMPLETE&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(&quot;=&quot;&nbsp;*&nbsp;80)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;\nGenerated&nbsp;files:&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;&nbsp;&nbsp;-&nbsp;{generated_count}&nbsp;grain&nbsp;headers&nbsp;in&nbsp;{BASE_INCLUDE_PATH}/generated/&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;&nbsp;&nbsp;-&nbsp;RegisterAllGrains.cpp&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;\nKey&nbsp;changes:&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;&nbsp;&nbsp;✓&nbsp;Added&nbsp;InstructionGrain&nbsp;base&nbsp;constructor&nbsp;calls&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;&nbsp;&nbsp;✓&nbsp;Automatic&nbsp;format&nbsp;detection&nbsp;(Operate/Memory/Branch/PAL)&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;&nbsp;&nbsp;✓&nbsp;Execution&nbsp;flags&nbsp;(CanDualIssue,&nbsp;NeedsStall)&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;&nbsp;&nbsp;✓&nbsp;EV6/21264&nbsp;latency&nbsp;timings&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;&nbsp;&nbsp;✓&nbsp;Throughput&nbsp;specifications&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;\nNext&nbsp;steps:&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;&nbsp;&nbsp;1.&nbsp;Add&nbsp;format&nbsp;flags&nbsp;to&nbsp;InstructionGrain.h&nbsp;enum&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;&nbsp;&nbsp;2.&nbsp;Add&nbsp;isOperateFormat()&nbsp;helpers&nbsp;to&nbsp;InstructionGrain&nbsp;class&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;&nbsp;&nbsp;3.&nbsp;Regenerate&nbsp;all&nbsp;grains&nbsp;with&nbsp;this&nbsp;script&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;&nbsp;&nbsp;4.&nbsp;Update&nbsp;destRegister()&nbsp;to&nbsp;use&nbsp;grain-&gt;isOperateFormat()&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;&nbsp;&nbsp;5.&nbsp;Rebuild&nbsp;project&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;\n🎉&nbsp;All&nbsp;grains&nbsp;will&nbsp;have&nbsp;proper&nbsp;initialization!&nbsp;🎉&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;Entry&nbsp;Point</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">#&nbsp;============================================================================</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">if&nbsp;__name__&nbsp;==&nbsp;'__main__':</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;len(sys.argv)&nbsp;&lt;&nbsp;2:</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(&quot;Usage:&nbsp;python&nbsp;generate_all_grains.py&nbsp;GrainMaster.tsv&nbsp;[output_dir]&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.exit(1)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;tsv_file&nbsp;=&nbsp;Path(sys.argv[1])</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;Path(sys.argv[2])&nbsp;if&nbsp;len(sys.argv)&nbsp;&gt;&nbsp;2&nbsp;else&nbsp;Path(&quot;.&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Validate&nbsp;TSV&nbsp;file&nbsp;exists&nbsp;and&nbsp;is&nbsp;a&nbsp;file</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;tsv_file.exists():</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;Error:&nbsp;TSV&nbsp;file&nbsp;not&nbsp;found:&nbsp;{tsv_file}&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.exit(1)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;tsv_file.is_file():</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;Error:&nbsp;{tsv_file}&nbsp;is&nbsp;not&nbsp;a&nbsp;file&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.exit(1)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Validate&nbsp;output&nbsp;directory&nbsp;exists&nbsp;and&nbsp;is&nbsp;a&nbsp;directory</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;output_dir.exists():</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;Error:&nbsp;Output&nbsp;directory&nbsp;not&nbsp;found:&nbsp;{output_dir}&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.exit(1)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;output_dir.is_dir():</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;Error:&nbsp;{output_dir}&nbsp;is&nbsp;not&nbsp;a&nbsp;directory&quot;)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.exit(1)</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;generate_all_grains(str(tsv_file),&nbsp;str(output_dir))</span></p>

<!--ZOOMSTOP-->
</div></div>
<script type="text/javascript">




function normHeaders() {
 var topicHeadHeight =  $("#idheaderbg > table").first().height() + 1,
	 $topicHeaderBox = $("#idheader"),
	 $topicContentBox = $("#idcontent"),
	 $navHeader = $("#navbar", parent.document),			 
	$navBox = $("div#hmnavframe", parent.document),
	 navHeaderHeight = $navHeader.height();
 if (topicHeadHeight != navHeaderHeight) {
	 $navHeader.css("height",topicHeadHeight + "px");
	 $navBox.css("top", topicHeadHeight + "px");
	 $topicHeaderBox.css("height", topicHeadHeight + "px");
		if ($topicHeaderBox.css("position") == "fixed"){
			$topicContentBox.css("margin-top", topicHeadHeight + "px");
			}
		}
    }
			 
  $(document).ready(function(){
    $(window).on('resize', function() {
      var y = $('#idheader').height(); 
      $('#idcontent').css('margin-top', y);
      var par = window.parent;
      if ($( par ).width() <= $( window ).width()+20) {
        $('#idheader').css('position', 'relative');
        $('#idcontent').css('margin-top', 0);
        $('#idbacktotop').css('display', 'block');
        $('.hmanchor').css('margin-top', -20);
	$('.hmanchor').css('padding-top', 20);
      }
      else {
        $('#idheader').css('position', 'fixed');
        $('#idcontent').css('margin-top', $('#idheader').height());
        $('#idbacktotop').css('display', 'none');
        $('.hmanchor').css('margin-top', -y-20);
		$('.hmanchor').css('padding-top', y+20);
		$("div#hmsplitter", parent.document).css('width', '3px');
      }
	normHeaders();
    });
    
	 $(window).resize(); //trigger event for initially small displays
  });
 

if ((!parent.hmNavigationFrame) && (parent.location) && (parent.location.href)) { $('.sync-toc').show();$('p.crumbs').hide();}

</script>
</body>
</html>
