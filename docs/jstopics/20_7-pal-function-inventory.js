hmLoadTopic({
hmKeywords:"",
hmTitle:"20.7 PAL Function Inventory",
hmDescription:"The PalBox supports approximately 80 PAL functions from the GrainMaster.tsv master opcode table, organized by category. All entries have Type PALcode and target PalBox.",
hmPrevLink:"20_6-privileged-instructions.html",
hmNextLink:"20_8-cserve-and-srm-console-in.html",
hmParentLink:"chapter-20---boot-sequence_-pa.html",
hmBreadCrumbs:"<a href=\"license-_-attributions.html\">ASA-EMulatR Reference Guide<\/a> &gt; <a href=\"index.html\">Introduction<\/a> &gt; <a href=\"architecture-overview.html\">Architecture Overview<\/a> &gt; <a href=\"chapter-20---boot-sequence_-pa.html\">Chapter 20 – Boot Sequence, PAL, and SRM Integration<\/a>",
hmTitlePath:"ASA-EMulatR Reference Guide > Introduction > Architecture Overview > Chapter 20 – Boot Sequence, PAL, and SRM Integration > 20.7 PAL Function Inventory",
hmHeader:"<h1 class=\"p_Heading1\" style=\"page-break-after: avoid;\"><span class=\"f_Heading1\">20.7 PAL Function Inventory<\/span><\/h1>\n\r",
hmBody:"<p class=\"p_Normal\">The PalBox supports approximately 80 PAL functions from the <span class=\"f_CodeExample\">GrainMaster.tsv<\/span> master opcode table, organized by category. All entries have Type <span class=\"f_CodeExample\">PALcode<\/span> and target <span class=\"f_CodeExample\">PalBox<\/span>.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><strong style=\"font-weight: bold;\">Privileged IPR Access (MFPR_* \/ MTPR_*):<\/strong> ASN, ASTEN, ASTSR, CC, DTB_ASN, DTB_CM, DTB_TAG, DTB_PTE, ESP, FEN, IER, IPL, ISR, KSP, MCES, PCBB, PRBR, PTBR, SCBB, SISR, SSP, SYSPTBR, TBCHK, USP, VPTB, WHAMI, PERFMON, DATFX, and others. MFPR functions write R0; MTPR functions read R16.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><strong style=\"font-weight: bold;\">System Operations:<\/strong> HALT, RESTART, REBOOT, DRAINA (drain aborts), CFLUSH (cache flush), SWPCTX (context switch), IMB (instruction memory barrier), INITPAL (initialize PAL), DI\/EI (disable\/enable interrupts), SWPIPL (swap IPL).<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><strong style=\"font-weight: bold;\">Mode Transitions:<\/strong> CHMK (Change Mode to Kernel), CHME (to Executive), CHMS (to Supervisor), CHMU (to User). Each raises the associated mode-change exception through PAL vectors.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><strong style=\"font-weight: bold;\">TLB Management:<\/strong> TBIA (invalidate all), TBIS (invalidate single), TBISD (DTB single), TBISI (ITB single), TBISASN (by ASN), DTBIS (DTB invalidate single).<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><strong style=\"font-weight: bold;\">Unprivileged PAL Calls:<\/strong> BPT (breakpoint), BUGCHK (bugcheck), CALLSYS (system call), GENTRAP (general trap), KBPT (kernel breakpoint), RD_PS (read PS), IMB, REI (return from exception).<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><strong style=\"font-weight: bold;\">Interlocked Queue Operations:<\/strong> INSQHIL, INSQHILR, INSQHIQ, INSQHIQR, INSQTIL, INSQTILR, INSQTIQ, INSQTIQR, INSQUEL, INSQUEQ, INSQUEL_D, INSQUEQ_D, REMQHIL, REMQTIL, REMQHIQ, REMQTIQ, REMQUEL, REMQUEQ, REMQUEUD, REMQUEQ_D. These implement atomic queue manipulation using PAL-mode serialization.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><strong style=\"font-weight: bold;\">Console\/Debug Services:<\/strong> CSERVE (console service dispatch), WRIPIR (write IPI register), WRFEN (write FEN), WRVPTPTR (write VPTB pointer), WRVAL\/RDVAL (write\/read scratch value), WRKGP\/RDKSP (kernel GP\/SP), WRUSP\/RDUSP (user SP), WRENT (write entry address), WRPERFMON (write performance monitor).<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><strong style=\"font-weight: bold;\">Memory Probes:<\/strong> PROBER (probe read access), PROBEW (probe write access). These test whether a virtual address is accessible at a given mode without faulting.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><strong style=\"font-weight: bold;\">Register Convention:<\/strong> PAL shadow registers substitute for R8–R14 and R25. MFPR functions write R0. MTPR functions read R16. CSERVE reads R16 (selector), R17–R19 (arguments), writes R0 (return value). Functions with no explicit register marking operate on implicit state only.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_SeeAlso\" style=\"page-break-after: avoid;\"><span class=\"f_SeeAlso\">See Also: grainfactoryLib\/grains\/GrainMaster.tsv (616-entry master opcode table);  <a href=\"8_12-pal-register-matrix.html\" class=\"topiclink\">8.12 PAL Register Matrix<\/a>.<\/span><\/p>\n\r"
})
