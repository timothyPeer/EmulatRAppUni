hmLoadTopic({
hmKeywords:"",
hmTitle:"Chapter 16 – Device Model & DMA",
hmDescription:"This chapter describes the implementation of the ASA-EmulatR device subsystem: how devices are constructed, differentiated, routed through MMIO, threaded for asynchronous I\/O,...",
hmPrevLink:"15_14-repository-directory-map.html",
hmNextLink:"16_1-device-differentiation-an.html",
hmParentLink:"architecture-overview.html",
hmBreadCrumbs:"<a href=\"index.html\">Introduction<\/a> &gt; <a href=\"architecture-overview.html\">Architecture Overview<\/a>",
hmTitlePath:"Introduction > Architecture Overview > Chapter 16 – Device Model & DMA",
hmHeader:"<h1 class=\"p_Heading1\" style=\"page-break-after: avoid;\"><span class=\"f_Heading1\">Chapter 16 – Device Model &amp; DMA<\/span><\/h1>\n\r",
hmBody:"<p class=\"p_Normal\">This chapter describes the implementation of the ASA-EmulatR device subsystem: how devices are constructed, differentiated, routed through MMIO, threaded for asynchronous I\/O, and integrated with DMA and interrupt delivery. Where Chapter 10 defines the architectural contract — MMIO is strongly ordered, devices are asynchronous, completion is interrupt-driven — this chapter describes the concrete classes, managers, threading model, storage backends, and bus topologies that deliver those guarantees.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><span style=\"font-weight: bold;\">Implementation Status:<\/span> The device and DMA subsystem is a work in progress. The MMIO dispatch engine (<span class=\"f_CodeExample\">MMIOManager<\/span>), device registration catalog (<span class=\"f_CodeExample\">DeviceCatalog<\/span>, <span class=\"f_CodeExample\">DeviceTemplate<\/span>), DMA coherency manager (<span class=\"f_CodeExample\">DMACoherencyManager<\/span>), and IRQ integration infrastructure are structurally complete and represent approximately 1,800 lines of production header code. The <span class=\"f_CodeExample\">IDeviceEmulator<\/span> interface contract is stable. Individual device emulators — SCSI disk, SCSI tape, network adapters, Fibre Channel storage, IDE controllers — are at varying stages of implementation. The interfaces are designed for incremental plug-in: each device manager can be developed, tested, and attached independently without modifying the core MMIO or interrupt infrastructure.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><span style=\"font-weight: bold;\">Estimated Structural Readiness:<\/span> The MMIO routing layer, device template system, and interrupt signaling path are ready for device integration. The DMA coherency path (TX flush, RX invalidation, LL\/SC reservation breaking) is implemented but requires validation under multi-device SMP load. Individual device emulators should be considered scaffolded — the interface contracts exist, the managers are instantiable, but full behavioral fidelity to Alpha hardware device protocols is ongoing. The system is designed so that new devices can be plugged into the existing infrastructure via <span class=\"f_CodeExample\">DeviceCatalog<\/span> registration and <span class=\"f_CodeExample\">MMIOManager<\/span> region binding without changes to the pipeline, memory system, or interrupt delivery paths.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><span style=\"font-weight: bold;\">Scope:<\/span> This chapter covers device differentiation, MMIO routing implementation, endianness handling, asynchronous I\/O threading, storage backends (including tape format variants), DMA implementation, and the current IRQ integration architecture. It does not cover TLB or address translation (Chapter 17) or fault dispatch mechanics (Chapter 18).<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_SeeAlso\" style=\"page-break-after: avoid;\"><span class=\"f_SeeAlso\">See Also: <a href=\"chapter-10---devices-and-mmio.html\" class=\"topiclink\">Chapter 10 – Devices and Memory-Mapped I\/O (MMIO)<\/a> (architectural contract); <a href=\"chapter-15---memory-system-imp.html\" class=\"topiclink\">Chapter 15 – Memory System Implementation Details<\/a> (GuestMemory PA routing, MMIO access semantics); <a href=\"chapter-14---execution-domains.html\" class=\"topiclink\">Chapter 14 – Execution Domains (“Boxes”)<\/a> &nbsp;(MBox, CBox device interaction).<\/span><\/p>\n\r"
})
