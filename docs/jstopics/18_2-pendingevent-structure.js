hmLoadTopic({
hmKeywords:"",
hmTitle:"18.2 PendingEvent Structure",
hmDescription:"18.2.1 Unified Event Carrier  PendingEvent (faultLib\/PendingEvent_Refined.h, ~420 lines) is the single structure that carries all information for any exceptional event — from a...",
hmPrevLink:"18_1-exception-classification.html",
hmNextLink:"18_3-exceptionfactory.html",
hmParentLink:"chapter-18---fault-dispatcher-.html",
hmBreadCrumbs:"<a href=\"index.html\">Introduction<\/a> &gt; <a href=\"architecture-overview.html\">Architecture Overview<\/a> &gt; <a href=\"chapter-18---fault-dispatcher-.html\">Chapter 18 – Fault Dispatcher &amp; Precise Exceptions<\/a>",
hmTitlePath:"Introduction > Architecture Overview > Chapter 18 – Fault Dispatcher & Precise Exceptions > 18.2 PendingEvent Structure",
hmHeader:"<h1 class=\"p_Heading1\" style=\"page-break-after: avoid;\"><span class=\"f_Heading1\">18.2 PendingEvent Structure<\/span><\/h1>\n\r",
hmBody:"<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">18.2.1 Unified Event Carrier<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><span class=\"f_CodeExample\">PendingEvent<\/span> (<span class=\"f_CodeExample\">faultLib\/PendingEvent_Refined.h<\/span>, ~420 lines) is the single structure that carries all information for any exceptional event — from a DTB miss to a machine check to a CALL_PAL — through detection, queueing, and delivery. It is designed to be created at the detection point, passed to FaultDispatcher for queueing, and consumed at delivery when entering PAL mode.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<hr style=\"height:1px; color:#000000; border-width:0; background-color:#000000;\" \/><p class=\"p_Normal\">&nbsp;<\/p>\n\r<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">18.2.2 Core Fields<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<div style=\"text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 0;\"><table style=\"border:none; border-spacing:0; border-collapse:collapse;\">\n\r<thead>\n\r<tr>\n\r<th style=\"vertical-align:top; background-color:#00FFFF; padding:0; border:solid thin #000000;\" scope=\"col\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Field<\/span><\/p>\n\r<\/th>\n\r<th style=\"vertical-align:top; background-color:#00FFFF; padding:0; border:solid thin #000000;\" scope=\"col\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Purpose<\/span><\/p>\n\r<\/th>\n\r<\/tr>\n\r<\/thead>\n\r<tbody>\n\r<tr>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\"><span class=\"f_CodeExample\">cpuId<\/span><\/p>\n\r<\/td>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\">CPU this event belongs to<\/p>\n\r<\/td>\n\r<\/tr>\n\r<tr>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\"><span class=\"f_CodeExample\">eventClass<\/span> (EventClass)<\/p>\n\r<\/td>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\">High-level classification: None, Exception, Interrupt, MachineCheck, Reset, InternalError, SystemEvent<\/p>\n\r<\/td>\n\r<\/tr>\n\r<tr>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\"><span class=\"f_CodeExample\">priority<\/span> (EventPriority)<\/p>\n\r<\/td>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\">Dispatch priority: Low, Normal, High, Critical, Reset<\/p>\n\r<\/td>\n\r<\/tr>\n\r<tr>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\"><span class=\"f_CodeExample\">kind<\/span> (PendingEventKind)<\/p>\n\r<\/td>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\">Event type: Exception, Interrupt, Ast, MachineCheck, Reset, PalCall<\/p>\n\r<\/td>\n\r<\/tr>\n\r<tr>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\"><span class=\"f_CodeExample\">exceptionClass<\/span> (ExceptionClass_EV6)<\/p>\n\r<\/td>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\">Fine-grained exception type (32 values)<\/p>\n\r<\/td>\n\r<\/tr>\n\r<tr>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\"><span class=\"f_CodeExample\">palVectorId<\/span> (PalVectorId_EV6)<\/p>\n\r<\/td>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\">Resolved PAL vector — set at delivery time, not detection<\/p>\n\r<\/td>\n\r<\/tr>\n\r<\/tbody>\n\r<\/table>\n\r<\/div>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<hr style=\"height:1px; color:#000000; border-width:0; background-color:#000000;\" \/><p class=\"p_Normal\">&nbsp;<\/p>\n\r<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">18.2.3 Address and Context Fields<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><span class=\"f_CodeExample\">faultVA<\/span> — virtual address of the faulting access (data faults) or instruction fetch (ITB faults). <span class=\"f_CodeExample\">faultPC<\/span> — program counter at the faulting instruction. <span class=\"f_CodeExample\">asn<\/span> — address space number at the time of the fault. <span class=\"f_CodeExample\">cm<\/span> — current mode (kernel\/executive\/supervisor\/user) at the time of the event.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<hr style=\"height:1px; color:#000000; border-width:0; background-color:#000000;\" \/><p class=\"p_Normal\">&nbsp;<\/p>\n\r<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">18.2.4 D-Stream Fault Specifics<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">For data-stream faults, PendingEvent carries a <span class=\"f_CodeExample\">DStreamFaultType<\/span> discriminator: <span class=\"f_CodeExample\">DTB_MISS_SINGLE<\/span>, <span class=\"f_CodeExample\">DTB_MISS_DOUBLE_3<\/span>, <span class=\"f_CodeExample\">DTB_MISS_DOUBLE_4<\/span>, <span class=\"f_CodeExample\">DFAULT_ACV<\/span>, <span class=\"f_CodeExample\">DFAULT_FOE<\/span>, <span class=\"f_CodeExample\">DFAULT_FOW<\/span>, <span class=\"f_CodeExample\">DFAULT_FOR<\/span>, <span class=\"f_CodeExample\">UNALIGN<\/span>. Additional fields include <span class=\"f_CodeExample\">mmAccessType<\/span> (Read\/Write\/Execute) and <span class=\"f_CodeExample\">mmFaultReason<\/span> for precise fault classification.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<hr style=\"height:1px; color:#000000; border-width:0; background-color:#000000;\" \/><p class=\"p_Normal\">&nbsp;<\/p>\n\r<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">18.2.5 Specialized Event Fields<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><span style=\"font-weight: bold;\">Arithmetic and FP:<\/span> <span class=\"f_CodeExample\">exc_Sum<\/span> (arithmetic exception summary register value) and <span class=\"f_CodeExample\">exc_Mask<\/span> (arithmetic exception mask) carry the FPCR trap state needed for PAL to update EXC_SUM.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><span style=\"font-weight: bold;\">Machine Check:<\/span> <span class=\"f_CodeExample\">mcReason<\/span> (MachineCheckReason), <span class=\"f_CodeExample\">mchkCode<\/span>, and <span class=\"f_CodeExample\">mchkAddr<\/span> carry the machine check diagnostic data needed by the PAL MCHK handler.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><span style=\"font-weight: bold;\">Interrupt:<\/span> <span class=\"f_CodeExample\">deviceInterruptVector<\/span>, <span class=\"f_CodeExample\">hwVector<\/span>, <span class=\"f_CodeExample\">hwIPL<\/span>, <span class=\"f_CodeExample\">swiLevel<\/span>, and <span class=\"f_CodeExample\">astMode<\/span> carry the source identification needed by the PAL interrupt handler.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><span style=\"font-weight: bold;\">Extended Properties:<\/span> The embedded <span class=\"f_CodeExample\">PendingPropertyInfo<\/span> struct carries detailed metadata: access type flags (<span class=\"f_CodeExample\">isWrite<\/span>, <span class=\"f_CodeExample\">isExecute<\/span>, <span class=\"f_CodeExample\">isUnaligned<\/span>, <span class=\"f_CodeExample\">isInstruction<\/span>), fault type flags (<span class=\"f_CodeExample\">isMachineCheck<\/span>, <span class=\"f_CodeExample\">isAccessViolation<\/span>, <span class=\"f_CodeExample\">isInvalidPTE<\/span>, <span class=\"f_CodeExample\">isNonCanonical<\/span>, <span class=\"f_CodeExample\">isFaultOnExecute\/Write\/Read<\/span>, <span class=\"f_CodeExample\">isDoubleMiss<\/span>), physical address, PTE value, and SMP fault information (<span class=\"f_CodeExample\">initiatingCpu<\/span>, <span class=\"f_CodeExample\">participatingCpus<\/span>, <span class=\"f_CodeExample\">acknowledgedCpus<\/span>, <span class=\"f_CodeExample\">isSmpRendezvousFailure<\/span>).<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_SeeAlso\" style=\"page-break-after: avoid;\"><span class=\"f_SeeAlso\">See Also: faultLib\/PendingEvent_Refined.h (~420 lines) – PendingEvent structure; <a href=\"chapter-7_5-priority-ordering.html\" class=\"topiclink\">7.6 PendingEvent Structure<\/a>.<\/span><\/p>\n\r"
})
