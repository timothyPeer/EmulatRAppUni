hmLoadTopic({
hmKeywords:"",
hmTitle:"21.3 EXECTRACE Instrumentation System",
hmDescription:"21.3.1 Architecture  Instrumentation is controlled by the AXP_INSTRUMENTATION_TRACE compile-time flag. When enabled, EXECTRACE macros (coreLib\/ExecTrace.h) emit structured trace",
hmPrevLink:"21_2-sources-of-nondeterminism.html",
hmNextLink:"21_4-subsystem-logging-(debug_.html",
hmParentLink:"chapter-21---debugging_-tracin.html",
hmBreadCrumbs:"<a href=\"license-_-attributions.html\">ASA-EMulatR Reference Guide<\/a> &gt; <a href=\"index.html\">Introduction<\/a> &gt; <a href=\"architecture-overview.html\">Architecture Overview<\/a> &gt; <a href=\"chapter-21---debugging_-tracin.html\">Chapter 21 – Debugging, Tracing, and Determinism<\/a>",
hmTitlePath:"ASA-EMulatR Reference Guide > Introduction > Architecture Overview > Chapter 21 – Debugging, Tracing, and Determinism > 21.3 EXECTRACE Instrumentation System",
hmHeader:"<h1 class=\"p_Heading1\" style=\"page-break-after: avoid;\"><span class=\"f_Heading1\">21.3 EXECTRACE Instrumentation System<\/span><\/h1>\n\r",
hmBody:"<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">21.3.1 Architecture<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">Instrumentation is controlled by the <span class=\"f_CodeExample\">AXP_INSTRUMENTATION_TRACE<\/span> compile-time flag. When enabled, <span class=\"f_CodeExample\">EXECTRACE<\/span> macros (<span class=\"f_CodeExample\">coreLib\/ExecTrace.h<\/span>) emit structured trace records at architecturally significant events throughout the emulator. All trace hooks are strictly observational — they observe committed state, do not inject ordering, do not alter timing, and do not allocate memory in hot paths.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<hr style=\"height:1px; color:#000000; border-width:0; background-color:#000000;\" \/><p class=\"p_Normal\">&nbsp;<\/p>\n\r<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">21.3.2 Trace Points<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<div style=\"text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 0;\"><table style=\"border:none; border-spacing:0; border-collapse:collapse;\">\n\r<thead>\n\r<tr>\n\r<th style=\"vertical-align:top; background-color:#00FFFF; padding:0; border:solid thin #000000;\" scope=\"col\"><p class=\"p_Normal\"><strong style=\"font-weight: bold;\">Macro<\/strong><\/p>\n\r<\/th>\n\r<th style=\"vertical-align:top; background-color:#00FFFF; padding:0; border:solid thin #000000;\" scope=\"col\"><p class=\"p_Normal\"><strong style=\"font-weight: bold;\">Trigger<\/strong><\/p>\n\r<\/th>\n\r<\/tr>\n\r<\/thead>\n\r<tbody>\n\r<tr>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\"><span class=\"f_CodeExample\">EXECTRACE_WB_RETIRE<\/span><\/p>\n\r<\/td>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\">Instruction retirement in WB stage — records PC, instruction, grain identity, result values, retirement cycle<\/p>\n\r<\/td>\n\r<\/tr>\n\r<tr>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\"><span class=\"f_CodeExample\">EXECTRACE_PAL_ENTRY<\/span><\/p>\n\r<\/td>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\">PAL mode entry — records PalEntryReasonTrace (CALL_PAL, FAULT, INTERRUPT, TRAP, MACHINE_CHECK), entry vector, faulting PC<\/p>\n\r<\/td>\n\r<\/tr>\n\r<tr>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\"><span class=\"f_CodeExample\">EXECTRACE_PAL_EXIT<\/span><\/p>\n\r<\/td>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\">PAL mode exit via HW_REI — records return PC, restored state<\/p>\n\r<\/td>\n\r<\/tr>\n\r<tr>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\"><span class=\"f_CodeExample\">EXECTRACE_INTERRUPT<\/span><\/p>\n\r<\/td>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\">Interrupt delivery — records interrupt source, IPL, vector, delivery cycle<\/p>\n\r<\/td>\n\r<\/tr>\n\r<tr>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\"><span class=\"f_CodeExample\">EXECTRACE_PIPELINE_FLUSH<\/span><\/p>\n\r<\/td>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\">Pipeline flush — records caller name, current PC, flush reason<\/p>\n\r<\/td>\n\r<\/tr>\n\r<tr>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\">Register write traces<\/p>\n\r<\/td>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\">Record <span class=\"f_CodeExample\">WriteEntry<\/span> (register type, index, value) for each architectural register modification<\/p>\n\r<\/td>\n\r<\/tr>\n\r<\/tbody>\n\r<\/table>\n\r<\/div>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">The ExecTrace system records structured data types: <span class=\"f_CodeExample\">PalEntryReasonTrace<\/span> (CALL_PAL, FAULT, INTERRUPT, TRAP, MACHINE_CHECK), <span class=\"f_CodeExample\">WriteEntry<\/span> (register type\/index\/value), and timestamped event records keyed by cycle count and CPU ID.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<hr style=\"height:1px; color:#000000; border-width:0; background-color:#000000;\" \/><p class=\"p_Normal\">&nbsp;<\/p>\n\r<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">21.3.3 Compile-Time Control<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">When <span class=\"f_CodeExample\">AXP_INSTRUMENTATION_TRACE<\/span> is not defined, all EXECTRACE macros compile to nothing — zero runtime cost. This allows three build configurations: fully instrumented builds (maximum observability), near-production builds (selected trace points only), and release builds (all tracing removed from hot paths). Determinism and tracing can be toggled independently.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_SeeAlso\" style=\"page-break-after: avoid;\"><span class=\"f_SeeAlso\">See Also: coreLib\/ExecTrace.h (PalEntryReasonTrace, WriteEntry, EXECTRACE macros).<\/span><\/p>\n\r"
})
