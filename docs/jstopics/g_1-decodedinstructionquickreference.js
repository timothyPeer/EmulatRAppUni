hmLoadTopic({
hmKeywords:"",
hmTitle:"G.1 – DecodedInstruction Quick Reference",
hmDescription:"The DecodedInstruction structure (DecodedInstruction_Ultra.h) uses an ultra-optimized packed layout (24-byte hot path) and is the primary data carrier through the pipeline.",
hmPrevLink:"appendixg-instructiongrainmechanics.html",
hmNextLink:"g_2-instructioninventory(grainmaster_tsv).html",
hmParentLink:"appendixg-instructiongrainmechanics.html",
hmBreadCrumbs:"<a href=\"license-_-attributions.html\">ASA-EMulatR Reference Guide<\/a> &gt; <a href=\"index.html\">Introduction<\/a> &gt; <a href=\"appendix---trait-examples.html\">Appendix<\/a> &gt; <a href=\"appendixg-instructiongrainmechanics.html\">Appendix G - Instruction Grain Mechanics<\/a>",
hmTitlePath:"ASA-EMulatR Reference Guide > Introduction > Appendix > Appendix G - Instruction Grain Mechanics > G.1 – DecodedInstruction Quick Reference",
hmHeader:"<h1 class=\"p_Heading1\" style=\"page-break-after: avoid;\"><span class=\"f_Heading1\">G.1 – DecodedInstruction Quick Reference<\/span><\/h1>\n\r",
hmBody:"<p class=\"p_Normal\">The <span class=\"f_CodeExample\">DecodedInstruction<\/span> structure (<span class=\"f_CodeExample\">DecodedInstruction_Ultra.h<\/span>) uses an ultra-optimized packed layout (24-byte hot path) and is the primary data carrier through the pipeline.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><strong style=\"font-weight: bold;\">Creation:<\/strong><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">DecodedInstruction&nbsp;di;<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">di.pc&nbsp;=&nbsp;pc;<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">setRaw(di,&nbsp;rawInstruction);&nbsp;\/\/&nbsp;Pack&nbsp;into&nbsp;high&nbsp;32&nbsp;bits&nbsp;of&nbsp;semantics<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">di.grain&nbsp;=&nbsp;GrainResolver::instance().ResolveGrain(rawInstruction);<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">decodeInstruction(di,&nbsp;rawInstruction,&nbsp;di.grain,&nbsp;pc);<\/span><\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><strong style=\"font-weight: bold;\">Field access:<\/strong> <span class=\"f_CodeExample\">getRaw(di)<\/span> extracts raw 32-bit instruction (~1 cycle). <span class=\"f_CodeExample\">getOpcodeFromPacked(di)<\/span> fast-path opcode (~2 cycles). <span class=\"f_CodeExample\">getRA(di)<\/span>, <span class=\"f_CodeExample\">getRB(di)<\/span>, <span class=\"f_CodeExample\">getRC(di)<\/span> return register indices. <span class=\"f_CodeExample\">usesLiteral(di)<\/span> checks literal vs register operand. <span class=\"f_CodeExample\">getLiteral(di)<\/span> returns the 8-bit literal value.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><strong style=\"font-weight: bold;\">Semantic queries:<\/strong> <span class=\"f_CodeExample\">isLoad(di)<\/span>, <span class=\"f_CodeExample\">isStore(di)<\/span>, <span class=\"f_CodeExample\">isBranch(di)<\/span>, <span class=\"f_CodeExample\">writesToR31(di)<\/span> (destination is R31 — result discarded).<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><strong style=\"font-weight: bold;\">Typical grain execute pattern:<\/strong><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">void&nbsp;execute(const&nbsp;DecodedInstruction&amp;&nbsp;di,&nbsp;AlphaProcessorContext&amp;&nbsp;ctx)&nbsp;{<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;quint64&nbsp;vb&nbsp;=&nbsp;ctx.readIntReg(getRB(di));<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;quint64&nbsp;vc&nbsp;=&nbsp;usesLiteral(di)&nbsp;?&nbsp;getLiteral(di)&nbsp;:&nbsp;ctx.readIntReg(getRC(di));<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;quint64&nbsp;result&nbsp;=&nbsp;vb&nbsp;+&nbsp;vc;<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;if&nbsp;(!writesToR31(di))&nbsp;ctx.writeIntReg(getRA(di),&nbsp;result);<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">}<\/span><\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_SeeAlso\" style=\"page-break-after: avoid;\"><span class=\"f_SeeAlso\">See Also: coreLib\/DecodedInstruction_Ultra.h; <a href=\"alphapipeline-implementation.html\" class=\"topiclink\">Chapter 13 – AlphaPipeline Implementation<\/a> &nbsp;(PipelineSlot carries DecodedInstruction).<\/span><\/p>\n\r"
})
