hmLoadTopic({
hmKeywords:"advance,advanceRing,AlphaCPU,BoxResult,Branch,BranchMisprediction,commitPending,Correctness,Cycle,CycleCounter,DE,Dispatch,EarlyReturn,EX,execute,Fault,faultDispatched,FetchResult,Flush,flushPipeline,Forwarding,Grain,IBox,IF,Invalidate,IS,MEM,PAL_CALL,Pipeline,Register,Retire,ReverseOrder,RingBuffer,Rotation,runOneInstruction,stage_DE,stage_EX,stage_IF,stage_IS,stage_MEM,stage_WB,Stall,Store,tick,WB,Writeback",
hmTitle:"13.5 Pipeline Execution - tick() and execute()",
hmDescription:"13.5.1 tick()  tick() is called once per cycle by AlphaCPU::runOneInstruction(). It supplies the IBox fetch result to the pipeline, calls execute() to run all six stages,...",
hmPrevLink:"13_4-pipelineslot-structure.html",
hmNextLink:"13_6-stage-implementations.html",
hmParentLink:"alphapipeline-implementation.html",
hmBreadCrumbs:"<a href=\"license-_-attributions.html\">ASA-EMulatR Reference Guide<\/a> &gt; <a href=\"index.html\">Introduction<\/a> &gt; <a href=\"architecture-overview.html\">Architecture Overview<\/a> &gt; <a href=\"alphapipeline-implementation.html\">Chapter 13 – AlphaPipeline Implementation<\/a>",
hmTitlePath:"ASA-EMulatR Reference Guide > Introduction > Architecture Overview > Chapter 13 – AlphaPipeline Implementation > 13.5 Pipeline Execution - tick() and execute()",
hmHeader:"<h1 class=\"p_Heading1\" style=\"page-break-after: avoid;\"><span class=\"f_Heading1\">13.5 Pipeline Execution - tick() and execute()<\/span><\/h1>\n\r",
hmBody:"<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">13.5.1 tick()<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">tick() is called once per cycle by AlphaCPU::runOneInstruction(). It supplies the IBox fetch result to the pipeline, calls execute() to run all six stages, rotates the ring buffer, increments the cycle counter, and returns a BoxResult indicating pipeline state.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<hr style=\"height:1px; color:#000000; border-width:0; background-color:#000000;\" \/><p class=\"p_Normal\">&nbsp;<\/p>\n\r<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">13.5.2 execute() - Stage Dispatch<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">execute() runs all six stages in reverse order (oldest to youngest):<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">BoxResult&nbsp;execute(FetchResult&amp;&nbsp;fetchResult)&nbsp;{<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;stage_WB(result);&nbsp;\/\/&nbsp;Stage&nbsp;5:&nbsp;retire,&nbsp;commit&nbsp;stores<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;\/\/&nbsp;→&nbsp;early&nbsp;return&nbsp;if&nbsp;FAULT&nbsp;or&nbsp;PAL_CALL&nbsp;detected<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;stage_MEM();&nbsp;\/\/&nbsp;Stage&nbsp;4:&nbsp;register&nbsp;writeback&nbsp;via&nbsp;commitPending()<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;\/\/&nbsp;→&nbsp;check&nbsp;for&nbsp;EX-stage&nbsp;flush&nbsp;request,&nbsp;fault&nbsp;detection<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;stage_EX();&nbsp;\/\/&nbsp;Stage&nbsp;3:&nbsp;grain→execute(),&nbsp;branch&nbsp;resolution<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;\/\/&nbsp;→&nbsp;check&nbsp;for&nbsp;EX-stage&nbsp;flush&nbsp;request,&nbsp;fault&nbsp;detection<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;stage_IS();&nbsp;\/\/&nbsp;Stage&nbsp;2:&nbsp;issue&nbsp;(mostly&nbsp;pass-through)<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;stage_DE();&nbsp;\/\/&nbsp;Stage&nbsp;1:&nbsp;decode&nbsp;(mostly&nbsp;pass-through)<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;stage_IF();&nbsp;\/\/&nbsp;Stage&nbsp;0:&nbsp;consume&nbsp;pending&nbsp;fetch<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;\/\/&nbsp;→&nbsp;check&nbsp;stalls,&nbsp;branch&nbsp;misprediction<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;return&nbsp;BoxResult().advance();<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">}<\/span><\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">The reverse order (WB→MEM→EX→IS→DE→IF) is the critical correctness mechanism: stage_MEM writes registers before stage_EX reads them in the same cycle, eliminating the need for forwarding logic. After WB, faults are checked and may cause early return with BoxResult::faultDispatched(). After EX, flush requests (slot.flushPipeline) are checked and younger stages are invalidated.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_SeeAlso\" style=\"page-break-after: avoid;\"><span class=\"f_SeeAlso\">See Also: Section 12.5 – runOneInstruction() (calls tick()).<\/span><\/p>\n\r"
})
