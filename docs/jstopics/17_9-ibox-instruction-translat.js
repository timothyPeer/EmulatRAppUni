hmLoadTopic({
hmKeywords:"",
hmTitle:"17.9 IBox Instruction Translation",
hmDescription:"IBox performs instruction address translation independently of MBox data translation. During the Fetch (IF) stage, IBox translates the current PC through the ITB (Instruction...",
hmPrevLink:"17_8-tlb-invalidation-and-shoo.html",
hmNextLink:"17_10-architectural-invariants.html",
hmParentLink:"chapter-17---tlb_-pte_-and-add.html",
hmBreadCrumbs:"<a href=\"license-_-attributions.html\">ASA-EMulatR Reference Guide<\/a> &gt; <a href=\"index.html\">Introduction<\/a> &gt; <a href=\"architecture-overview.html\">Architecture Overview<\/a> &gt; <a href=\"chapter-17---tlb_-pte_-and-add.html\">Chapter 17 – Address Translation, TLB, and PTE<\/a>",
hmTitlePath:"ASA-EMulatR Reference Guide > Introduction > Architecture Overview > Chapter 17 – Address Translation, TLB, and PTE > 17.9 IBox Instruction Translation",
hmHeader:"<h1 class=\"p_Heading1\" style=\"page-break-after: avoid;\"><span class=\"f_Heading1\">17.9 IBox Instruction Translation<\/span><\/h1>\n\r",
hmBody:"<p class=\"p_Normal\">IBox performs instruction address translation independently of MBox data translation. During the Fetch (IF) stage, IBox translates the current PC through the ITB (Instruction Translation Buffer) to obtain the physical address for instruction fetch.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">The ITB lookup uses the same <span class=\"f_CodeExample\">SPAMShardManager<\/span> infrastructure as the DTB, but with <span class=\"f_CodeExample\">Realm::I<\/span> (instruction) rather than <span class=\"f_CodeExample\">Realm::D<\/span> (data). ITB misses are handled differently from DTB misses: an ITB miss raises a translation fault that enters PAL mode, where the PAL miss handler walks the page table, inserts the result into the ITB, and retries the fetch.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">ITB invalidation (<span class=\"f_CodeExample\">onITB_IAWrite<\/span>, <span class=\"f_CodeExample\">onITB_ISWrite<\/span>) additionally calls <span class=\"f_CodeExample\">flushIPrefetchQueue()<\/span> to discard any instructions fetched using the now-invalidated translation. This ensures that stale instruction translations do not survive in the fetch pipeline.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_SeeAlso\" style=\"page-break-after: avoid;\"><span class=\"f_SeeAlso\">See Also: <a href=\"14_1-ibox---instruction-box.html\" class=\"topiclink\">14.1 IBox – Instruction Box<\/a>; <a href=\"chapter-3_4-fetch-stage-(if).html\" class=\"topiclink\">3.4 Fetch Stage (IF)<\/a>.<\/span><\/p>\n\r"
})
