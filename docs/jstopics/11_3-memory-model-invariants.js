hmLoadTopic({
hmKeywords:"",
hmTitle:"11.3 Memory Model Invariants",
hmDescription:"11.3.1 Weak Ordering by Default  Memory is weakly ordered. Loads and stores may reorder. Stores may be deferred (via per-CPU write buffers). Visibility is not guaranteed without",
hmPrevLink:"11_2-execution-and-pipeline-in.html",
hmNextLink:"11_4-load-locked-_-store-condi.html",
hmParentLink:"chapter-11---architectural-inv.html",
hmBreadCrumbs:"<a href=\"license-_-attributions.html\">ASA-EMulatR Reference Guide<\/a> &gt; <a href=\"index.html\">Introduction<\/a> &gt; <a href=\"architecture-overview.html\">Architecture Overview<\/a> &gt; <a href=\"chapter-11---architectural-inv.html\">Chapter 11 - Architectural Invariants<\/a>",
hmTitlePath:"ASA-EMulatR Reference Guide > Introduction > Architecture Overview > Chapter 11 - Architectural Invariants > 11.3 Memory Model Invariants",
hmHeader:"<h1 class=\"p_Heading1\" style=\"page-break-after: avoid;\"><span class=\"f_Heading1\">11.3 Memory Model Invariants<\/span><\/h1>\n\r",
hmBody:"<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">11.3.1 Weak Ordering by Default<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">Memory is weakly ordered. Loads and stores may reorder. Stores may be deferred (via per-CPU write buffers). Visibility is not guaranteed without barriers. No implicit ordering exists.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">Enforced by: WriteBufferManager defers stores per-CPU, GuestMemory provides no cross-CPU ordering guarantees, loads may observe stale values from local caches.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<hr style=\"height:1px; color:#000000; border-width:0; background-color:#000000;\" \/><p class=\"p_Normal\">&nbsp;<\/p>\n\r<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">11.3.2 Explicit Ordering Only<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">Ordering is enforced only by: MB\/WMB (memory barriers), EXCB\/TRAPB (exception\/trap barriers), PAL entry\/exit (implicit full serialization), and certain MMIO semantics (strong ordering). Any code relying on implicit ordering is incorrect.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">Enforced by: CBox barrier implementations (executeMB\/WMB\/TRAPB\/EXCB), MemoryBarrierCoordinator for global coordination, pipeline stall\/release mechanics in stage_MEM().<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<hr style=\"height:1px; color:#000000; border-width:0; background-color:#000000;\" \/><p class=\"p_Normal\">&nbsp;<\/p>\n\r<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">11.3.3 MMIO Strong Ordering<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">MMIO accesses are strongly ordered, synchronous, never buffered, and never speculative. MMIO correctness overrides performance.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">Enforced by: MMIO writes bypass WriteBufferManager, MMIOManager dispatches synchronously in EX stage, MMIOWindow::stronglyOrdered flag, pipeline stalls until MMIO access completes.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_SeeAlso\" style=\"page-break-after: avoid;\"><span class=\"f_SeeAlso\">See Also: <a href=\"chapter-5---memory-system-arch.html\" class=\"topiclink\">Chapter 5 - Memory System Architecture<\/a>; <a href=\"chapter-6---serialization-and-.html\" class=\"topiclink\">Chapter 6 - Serialization and Stall Model<\/a>; <a href=\"chapter-10---devices-and-mmio.html\" class=\"topiclink\">Chapter 10 â€“ Devices and Memory-Mapped I\/O (MMIO)<\/a>.<\/span><\/p>\n\r"
})
