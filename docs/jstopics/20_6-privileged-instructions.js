hmLoadTopic({
hmKeywords:"",
hmTitle:"20.6 Privileged Instructions",
hmDescription:"The following instructions are legal only in PAL mode. Outside PAL mode, each generates an OPCDEC (illegal instruction) fault.",
hmPrevLink:"20_5-shadow-registers-and-hwpc.html",
hmNextLink:"20_7-pal-function-inventory.html",
hmParentLink:"chapter-20---boot-sequence_-pa.html",
hmBreadCrumbs:"<a href=\"index.html\">Introduction<\/a> &gt; <a href=\"architecture-overview.html\">Architecture Overview<\/a> &gt; <a href=\"chapter-20---boot-sequence_-pa.html\">Chapter 20 – Boot Sequence, PAL, and SRM Integration<\/a>",
hmTitlePath:"Introduction > Architecture Overview > Chapter 20 – Boot Sequence, PAL, and SRM Integration > 20.6 Privileged Instructions",
hmHeader:"<h1 class=\"p_Heading1\" style=\"page-break-after: avoid;\"><span class=\"f_Heading1\">20.6 Privileged Instructions<\/span><\/h1>\n\r",
hmBody:"<p class=\"p_Normal\">The following instructions are legal only in PAL mode. Outside PAL mode, each generates an OPCDEC (illegal instruction) fault.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<div style=\"text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 0;\"><table style=\"border:none; border-spacing:0; border-collapse:collapse;\">\n\r<thead>\n\r<tr>\n\r<th style=\"vertical-align:top; background-color:#00FFFF; padding:0; border:solid thin #000000;\" scope=\"col\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Instruction<\/span><\/p>\n\r<\/th>\n\r<th style=\"vertical-align:top; background-color:#00FFFF; padding:0; border:solid thin #000000;\" scope=\"col\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Opcode<\/span><\/p>\n\r<\/th>\n\r<th style=\"vertical-align:top; background-color:#00FFFF; padding:0; border:solid thin #000000;\" scope=\"col\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Function<\/span><\/p>\n\r<\/th>\n\r<\/tr>\n\r<\/thead>\n\r<tbody>\n\r<tr>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\"><span class=\"f_CodeExample\">HW_MFPR<\/span><\/p>\n\r<\/td>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\">0x19<\/p>\n\r<\/td>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\">Move From Processor Register — reads an IPR value into a general register. MFPR_* PAL calls are wrappers: write R0 with the IPR value read.<\/p>\n\r<\/td>\n\r<\/tr>\n\r<tr>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\"><span class=\"f_CodeExample\">HW_MTPR<\/span><\/p>\n\r<\/td>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\">0x1D<\/p>\n\r<\/td>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\">Move To Processor Register — writes a general register value into an IPR. MTPR_* PAL calls are wrappers: read R16 as the value to write. Side effects include TLB invalidation, interrupt state updates, AST recalculation.<\/p>\n\r<\/td>\n\r<\/tr>\n\r<tr>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\"><span class=\"f_CodeExample\">HW_LD<\/span><\/p>\n\r<\/td>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\">0x1B<\/p>\n\r<\/td>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\">Hardware Load — PAL-mode physical memory access bypassing normal VA→PA translation. Used by PAL code to read page table entries, HWPCB fields, and system data structures directly from physical memory.<\/p>\n\r<\/td>\n\r<\/tr>\n\r<tr>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\"><span class=\"f_CodeExample\">HW_ST<\/span><\/p>\n\r<\/td>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\">0x1F<\/p>\n\r<\/td>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\">Hardware Store — PAL-mode physical memory write bypassing translation. Used by PAL code to update page table entries, HWPCB fields, and system control structures.<\/p>\n\r<\/td>\n\r<\/tr>\n\r<tr>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\"><span class=\"f_CodeExample\">HW_REI<\/span><\/p>\n\r<\/td>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\">(within PAL)<\/p>\n\r<\/td>\n\r<td style=\"vertical-align:top; padding:0; border:solid thin #000000;\"><p class=\"p_Normal\">Hardware Return from Exception\/Interrupt — the sole legal exit from PAL mode. Restores context, deactivates shadow registers, flushes pipeline.<\/p>\n\r<\/td>\n\r<\/tr>\n\r<\/tbody>\n\r<\/table>\n\r<\/div>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">Privilege enforcement is multi-layered: instruction decode checks the PAL mode flag (<span class=\"f_CodeExample\">PC bit 0 = 1<\/span>), and any privileged instruction outside PAL raises an OPCDEC fault delivered precisely through the FaultDispatcher. Cache and TLB control operations (TBI, TBIS, DTB\/ITB invalidation) are also restricted to PAL mode and routed through HW_MTPR with appropriate IPR-dispatch side effects.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_SeeAlso\" style=\"page-break-after: avoid;\"><span class=\"f_SeeAlso\">See Also: <a href=\"chapter-8_10-enforcing-the-pri.html\" class=\"topiclink\">8.10 Enforcing the Privileged Boundary<\/a>; <a href=\"chapter-8_3-privilege-levels-i.html\" class=\"topiclink\">8.3 Privilege Levels<\/a>.<\/span><\/p>\n\r"
})
