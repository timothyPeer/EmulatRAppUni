hmLoadTopic({
hmKeywords:"",
hmTitle:"5.3 Memory Layers Overview",
hmDescription:"The memory system is structured into distinct layers, each with a clear responsibility. No layer performs hidden work on behalf of another.",
hmPrevLink:"chapter-5_2-design-philosophy.html",
hmNextLink:"chapter-5_4-virtual-addressing.html",
hmParentLink:"chapter-5---memory-system-arch.html",
hmBreadCrumbs:"<a href=\"index.html\">Introduction<\/a> &gt; <a href=\"architecture-overview.html\">Architecture Overview<\/a> &gt; <a href=\"chapter-5---memory-system-arch.html\">Chapter 5 - Memory System Architecture<\/a>",
hmTitlePath:"Introduction > Architecture Overview > Chapter 5 - Memory System Architecture > 5.3 Memory Layers Overview",
hmHeader:"<h1 class=\"p_Heading1\" style=\"page-break-after: avoid;\"><span class=\"f_Heading1\">5.3 Memory Layers Overview<\/span><\/h1>\n\r",
hmBody:"<p class=\"p_Normal\">The memory system is structured into distinct layers, each with a clear responsibility. No layer performs hidden work on behalf of another.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">Virtual&nbsp;Address&nbsp;(VA)<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;▼<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">Translation&nbsp;(ITB&nbsp;\/&nbsp;DTB&nbsp;via&nbsp;Ev6Translator)<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;▼<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">Physical&nbsp;Address&nbsp;(PA)<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;▼<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">┌───────────────────────────────────┐<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;GuestMemory&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;(PA&nbsp;Router&nbsp;+&nbsp;Reservation&nbsp;Tracker)&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;┌────────────┐&nbsp;┌───────────────┐&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;│&nbsp;SafeMemory&nbsp;│&nbsp;│&nbsp;MMIO&nbsp;Manager&nbsp;&nbsp;│&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;│&nbsp;(RAM)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;│&nbsp;(Devices)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;└────────────┘&nbsp;└───────────────┘&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">└───────────────────────────────────┘<\/span><\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">The layer responsibilities are:<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">Ev6Translator — converts virtual addresses to physical addresses using ITB (instruction) and DTB (data) translation buffers, with page table walking on TLB miss. Per-CPU, supports ASN tagging, KSEG fast-path, and canonical address checking.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">GuestMemory — the single shared physical address space visible to all CPUs. Routes physical addresses to the correct subsystem (SafeMemory, MMIO) via a PA routing table. Also hosts LL\/SC reservation tracking.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">SafeMemory — implements actual physical RAM storage. Byte-addressable, bounds-checked, thread-safe, deterministic. Uses SparseMemoryBacking for on-demand page allocation.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">MMIO Manager — maps physical address ranges to registered device emulators (IDeviceEmulator). Strongly ordered.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_SeeAlso\" style=\"page-break-after: avoid;\"><span class=\"f_SeeAlso\">See Also: Sections 5.4–5.7 for individual layer detail.<\/span><\/p>\n\r"
})
