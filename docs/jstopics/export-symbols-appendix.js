hmLoadTopic({
hmKeywords:"",
hmTitle:"Export Symbols",
hmDescription:"===============================================================================",
hmPrevLink:"",
hmNextLink:"",
hmParentLink:"appendix---trait-examples.html",
hmBreadCrumbs:"",
hmTitlePath:"Introduction > Appendix > Appendix I – Global Singletons",
hmHeader:"<h1 class=\"p_Heading1\" style=\"page-break-after: avoid;\"><span class=\"f_Heading1\">Export Symbols<\/span><\/h1>\n\r",
hmBody:"<p class=\"p_Normal\">===============================================================================<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; C++\/Qt Symbol Export Cheat Sheet for Shared Libraries<\/p>\n\r<p class=\"p_Normal\">===============================================================================<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">Overview:<\/p>\n\r<p class=\"p_Normal\">---------<\/p>\n\r<p class=\"p_Normal\">When building a shared library (DLL\/SO), you must mark exported symbols so they<\/p>\n\r<p class=\"p_Normal\">are visible to code that links against your library. This is usually done via<\/p>\n\r<p class=\"p_Normal\">an EXPORT macro and a global header (e.g., corelib_global.h).<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">-------------------------------------------------------------------------------<\/p>\n\r<p class=\"p_Normal\">1. Defining the EXPORT Macro<\/p>\n\r<p class=\"p_Normal\">-------------------------------------------------------------------------------<\/p>\n\r<p class=\"p_Normal\">- Create a header (e.g., corelib_global.h):<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;#ifndef CORELIB_GLOBAL_H<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;#define CORELIB_GLOBAL_H<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;#include &lt;QtCore\/qglobal.h&gt;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;#if defined(CORELIB_LIBRARY)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp;#define CORELIB_EXPORT Q_DECL_EXPORT<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;#else<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp;#define CORELIB_EXPORT Q_DECL_IMPORT<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;#endif<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;#endif \/\/ CORELIB_GLOBAL_H<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">- When building the library itself, define the macro (e.g., CORELIB_LIBRARY).<\/p>\n\r<p class=\"p_Normal\">- When linking _to_ the library, do NOT define it.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">-------------------------------------------------------------------------------<\/p>\n\r<p class=\"p_Normal\">2. Exporting Classes, Structs, Enum Classes<\/p>\n\r<p class=\"p_Normal\">-------------------------------------------------------------------------------<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">- To export a class:<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;class CORELIB_EXPORT MyClass { ... };<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">- To export a struct:<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;struct CORELIB_EXPORT MyStruct { ... };<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">- To export an enum class:<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;enum class CORELIB_EXPORT MyEnumClass { ... };<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;(Note: Enum classes rarely need exporting unless used as a symbol across DLLs)<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">-------------------------------------------------------------------------------<\/p>\n\r<p class=\"p_Normal\">3. Exporting Global Variables and Constants<\/p>\n\r<p class=\"p_Normal\">-------------------------------------------------------------------------------<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">- For `static constexpr` (in header): No EXPORT needed.<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;static constexpr int MyValue = 42; &nbsp; \/\/ Each TU gets its own copy.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">- For a shared (non-static) constant:<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ In header<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;extern CORELIB_EXPORT const int MyExportedValue;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ In source (.cpp)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;CORELIB_EXPORT const int MyExportedValue = 123;<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">-------------------------------------------------------------------------------<\/p>\n\r<p class=\"p_Normal\">4. General Guidelines and Pitfalls<\/p>\n\r<p class=\"p_Normal\">-------------------------------------------------------------------------------<\/p>\n\r<p class=\"p_Normal\">- The EXPORT macro must appear *immediately before* the class\/struct\/enum<\/p>\n\r<p class=\"p_Normal\"> &nbsp;keyword in the declaration.<\/p>\n\r<p class=\"p_Normal\">- Only decorate *declarations*, not method implementations or member functions<\/p>\n\r<p class=\"p_Normal\"> &nbsp;inside the .cpp file.<\/p>\n\r<p class=\"p_Normal\">- EXPORT macro not needed for inline methods inside classes marked for export.<\/p>\n\r<p class=\"p_Normal\">- Avoid exporting private\/internal types. Export only API-facing classes\/types.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">-------------------------------------------------------------------------------<\/p>\n\r<p class=\"p_Normal\">5. Platform-Specific Notes<\/p>\n\r<p class=\"p_Normal\">-------------------------------------------------------------------------------<\/p>\n\r<p class=\"p_Normal\">- Windows (MSVC): __declspec(dllexport) \/ __declspec(dllimport)<\/p>\n\r<p class=\"p_Normal\">- Linux\/Mac (GCC\/Clang): __attribute__((visibility(&quot;default&quot;))) \/ usually not needed<\/p>\n\r<p class=\"p_Normal\">- Qt’s Q_DECL_EXPORT and Q_DECL_IMPORT handle these differences for you.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">-------------------------------------------------------------------------------<\/p>\n\r<p class=\"p_Normal\">6. Auto-Exporting All Symbols (Not Recommended)<\/p>\n\r<p class=\"p_Normal\">-------------------------------------------------------------------------------<\/p>\n\r<p class=\"p_Normal\">- GCC\/Clang: Compile with -fvisibility=default (not recommended for API hygiene).<\/p>\n\r<p class=\"p_Normal\">- MSVC: Use linker \/EXPORT or .DEF files (rarely used in Qt projects).<\/p>\n\r<p class=\"p_Normal\">- **Best Practice**: Explicitly decorate only what should be exported.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">-------------------------------------------------------------------------------<\/p>\n\r<p class=\"p_Normal\">7. Precompiled Headers (PCH)<\/p>\n\r<p class=\"p_Normal\">-------------------------------------------------------------------------------<\/p>\n\r<p class=\"p_Normal\">- Always #include the global export macro header *after* PCH includes.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">-------------------------------------------------------------------------------<\/p>\n\r<p class=\"p_Normal\">8. Example Summary<\/p>\n\r<p class=\"p_Normal\">-------------------------------------------------------------------------------<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ corelib_global.h<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;#include &lt;QtCore\/qglobal.h&gt;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;#if defined(CORELIB_LIBRARY)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp;#define CORELIB_EXPORT Q_DECL_EXPORT<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;#else<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp;#define CORELIB_EXPORT Q_DECL_IMPORT<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;#endif<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ myclass.h<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;#include &quot;corelib_global.h&quot;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;class CORELIB_EXPORT MyClass { ... };<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ mystruct.h<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;struct CORELIB_EXPORT MyStruct { ... };<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ myenum.h<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;enum class CORELIB_EXPORT MyEnumClass { ... };<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">-------------------------------------------------------------------------------<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">Reference: Qt documentation, Microsoft\/LLVM docs, and practical usage.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">===============================================================================<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp;(c) 2025 Timothy Peer \/ ASA-EmulatR Project – For internal reference<\/p>\n\r<p class=\"p_Normal\">===============================================================================<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r"
})
