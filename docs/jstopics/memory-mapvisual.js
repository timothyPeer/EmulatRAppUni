hmLoadTopic({
hmKeywords:"",
hmTitle:"Memory MapVisual",
hmDescription:"# CANONICAL PA ROUTING TABLE (Option A) # ASA Emulator - Single Source of Truth for Physical Address Mapping # Date: 2025-01-27  ## DESIGN PRINCIPLE: SafeMemory is the only wri",
hmPrevLink:"",
hmNextLink:"",
hmParentLink:"appendix---trait-examples.html",
hmBreadCrumbs:"",
hmTitlePath:"ASA-EMulatR Reference Guide > Introduction > Appendix > Appendix I – Glossary and Acronyms",
hmHeader:"<h1 class=\"p_Heading1\" style=\"page-break-after: avoid;\"><span class=\"f_Heading1\">Memory MapVisual<\/span><\/h1>\n\r",
hmBody:"<p class=\"p_Normal\"># CANONICAL PA ROUTING TABLE (Option A)<\/p>\n\r<p class=\"p_Normal\"># ASA Emulator - Single Source of Truth for Physical Address Mapping<\/p>\n\r<p class=\"p_Normal\"># Date: 2025-01-27<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">## DESIGN PRINCIPLE: SafeMemory is the only writable RAM<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">All &quot;normal memory&quot; (including HWRPB, low memory structures, main RAM) <\/p>\n\r<p class=\"p_Normal\">is stored in SafeMemory with no duplication.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">## PA REGION TABLE (Non-Overlapping, Ordered by PA)<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_CodeExample\">|<span class=\"f_CodeExample\">&nbsp;PA&nbsp;Start&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;PA&nbsp;End&nbsp;(excl)&nbsp;&nbsp;|&nbsp;Size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Target&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Notes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">|----------------|----------------|-----------|------------------|--------------------------------|<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">|&nbsp;0x0000_0000&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;0x0000_2000&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;8&nbsp;KB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;**SafeMemory**&nbsp;&nbsp;&nbsp;|&nbsp;Low&nbsp;memory&nbsp;scratch\/reserved&nbsp;&nbsp;&nbsp;&nbsp;|<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">|&nbsp;0x0000_2000&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;0x0000_6000&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;16&nbsp;KB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;**SafeMemory**&nbsp;&nbsp;&nbsp;|&nbsp;HWRPB&nbsp;data&nbsp;structure&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">|&nbsp;0x0000_6000&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;0x0001_0000&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;40&nbsp;KB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;**SafeMemory**&nbsp;&nbsp;&nbsp;|&nbsp;Reserved\/scratch&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">|&nbsp;0x0001_0000&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;0x2000_0000&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;~512&nbsp;MB&nbsp;&nbsp;&nbsp;|&nbsp;**Unmapped**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Reserved\/fault&nbsp;on&nbsp;access&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">|&nbsp;0x2000_0000&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;0x2020_0000&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;2&nbsp;MB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;**SRMFirmware**&nbsp;&nbsp;|&nbsp;clipper.bin&nbsp;(read-only)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">|&nbsp;0x2020_0000&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;0x8000_0000&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;~1.5&nbsp;GB&nbsp;&nbsp;&nbsp;|&nbsp;**Unmapped**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Reserved\/fault&nbsp;on&nbsp;access&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">|&nbsp;0x8000_0000&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;0x8_8000_0000&nbsp;&nbsp;|&nbsp;32&nbsp;GB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;**SafeMemory**&nbsp;&nbsp;&nbsp;|&nbsp;Main&nbsp;RAM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">|&nbsp;0x8_8000_0000&nbsp;&nbsp;|&nbsp;0x10_0000_0000&nbsp;|&nbsp;~96&nbsp;GB&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;**Unmapped**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Reserved&nbsp;(future&nbsp;expansion)&nbsp;&nbsp;&nbsp;&nbsp;|<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">|&nbsp;0x10_0000_0000&nbsp;|&nbsp;0x20_0000_0000&nbsp;|&nbsp;64&nbsp;GB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;**MMIOManager**&nbsp;&nbsp;|&nbsp;Device&nbsp;CSRs,&nbsp;BARs,&nbsp;PCI&nbsp;config&nbsp;&nbsp;|<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">|&nbsp;0x20_0000_0000&nbsp;|&nbsp;...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;**Unmapped**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Reserved&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;<\/span><\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">## SAFEMEMORY OFFSET CALCULATION<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">SafeMemory is **discontinuous in PA space** but **contiguous internally**.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">### Internal SafeMemory Layout (offset-based)<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">SafeMemory Offset &nbsp;| PA Range &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | Purpose<\/p>\n\r<p class=\"p_Normal\">-------------------|------------------------|---------------------------<\/p>\n\r<p class=\"p_Normal\">0x0000_0000 &nbsp; &nbsp; &nbsp; &nbsp;| 0x0000_0000 - 0x0001_0000 | Low 64 KB (includes HWRPB at +0x2000)<\/p>\n\r<p class=\"p_Normal\">0x0001_0000 &nbsp; &nbsp; &nbsp; &nbsp;| 0x8000_0000 - 0x8_8000_0000 | Main RAM (32 GB)<\/p>\n\r<p class=\"p_Normal\">-------------------|------------------------|---------------------------<\/p>\n\r<p class=\"p_Normal\">Total Size: 64 KB + 32 GB = 0x8_0001_0000 bytes<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">### PA → SafeMemory Offset Translation<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">**CRITICAL**: SafeMemory has TWO PA regions that map to ONE contiguous buffer!<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">quint64 paToSafeMemoryOffset(quint64 pa) noexcept<\/p>\n\r<p class=\"p_Normal\">{<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ Region 1: Low 64 KB (PA 0x0 - 0x10000)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;if (pa &gt;= 0x0000_0000 &amp;&amp; pa &lt; 0x0001_0000) {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;return pa; &nbsp;\/\/ Direct mapping: PA 0x0 → offset 0x0<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;}<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ Region 2: Main RAM (PA 0x8000_0000 - 0x8_8000_0000)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;if (pa &gt;= 0x8000_0000 &amp;&amp; pa &lt; 0x8_8000_0000) {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;return (pa - 0x8000_0000) + 0x0001_0000; &nbsp;\/\/ Main RAM starts at offset 0x10000<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;}<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ Not in SafeMemory<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;return INVALID_OFFSET;<\/p>\n\r<p class=\"p_Normal\">}<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">**Example Translations:**<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">PA 0x0000_0000 → SafeMemory offset 0x0000_0000 (first byte of low memory)<\/p>\n\r<p class=\"p_Normal\">PA 0x0000_2000 → SafeMemory offset 0x0000_2000 (HWRPB start)<\/p>\n\r<p class=\"p_Normal\">PA 0x0000_FFFF → SafeMemory offset 0x0000_FFFF (last byte of low memory)<\/p>\n\r<p class=\"p_Normal\">PA 0x8000_0000 → SafeMemory offset 0x0001_0000 (first byte of main RAM)<\/p>\n\r<p class=\"p_Normal\">PA 0x8000_0100 → SafeMemory offset 0x0001_0100 (offset 0x100 into main RAM)<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">## GUESTMEMORY IMPLEMENTATION<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">### Route Table Structure<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">struct PARouteEntry {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;quint64 startPA; &nbsp; &nbsp; &nbsp;\/\/ Inclusive<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;quint64 endPA; &nbsp; &nbsp; &nbsp; &nbsp;\/\/ Exclusive<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;RouteTarget target;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ For SafeMemory regions, store offset calculation parameters<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;quint64 offsetBase; &nbsp; \/\/ Add this to (pa - startPA) to get subsystem offset<\/p>\n\r<p class=\"p_Normal\">};<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">enum class RouteTarget : quint8 {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;None = 0,<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;SafeMemory,<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;SRMFirmware,<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;MMIOManager<\/p>\n\r<p class=\"p_Normal\">};<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">### Route Table Initialization<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">void GuestMemory::initDefaultPARoutes() noexcept<\/p>\n\r<p class=\"p_Normal\">{<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;m_routes.clear();<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;m_routes.reserve(5); &nbsp;\/\/ Fixed size, no realloc<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ ========================================================================<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ SafeMemory Region 1: Low 64 KB (PA 0x0 - 0x10000)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ ========================================================================<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;m_routes.append({<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;.startPA &nbsp; &nbsp;= 0x0000_0000,<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;.endPA &nbsp; &nbsp; &nbsp;= 0x0001_0000,<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;.target &nbsp; &nbsp; = RouteTarget::SafeMemory,<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;.offsetBase = 0x0 &nbsp;\/\/ PA 0x0 → SafeMemory offset 0x0<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;});<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ ========================================================================<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ SRM Firmware: Read-only clipper.bin (PA 0x2000_0000 - 0x2020_0000)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ ========================================================================<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;m_routes.append({<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;.startPA &nbsp; &nbsp;= 0x2000_0000,<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;.endPA &nbsp; &nbsp; &nbsp;= 0x2020_0000,<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;.target &nbsp; &nbsp; = RouteTarget::SRMFirmware,<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;.offsetBase = 0x0 &nbsp;\/\/ PA 0x2000_0000 → SRM offset 0x0<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;});<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ ========================================================================<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ SafeMemory Region 2: Main RAM (PA 0x8000_0000 - 0x8_8000_0000)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ ========================================================================<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;m_routes.append({<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;.startPA &nbsp; &nbsp;= 0x8000_0000,<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;.endPA &nbsp; &nbsp; &nbsp;= 0x8_8000_0000,<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;.target &nbsp; &nbsp; = RouteTarget::SafeMemory,<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;.offsetBase = 0x0001_0000 &nbsp;\/\/ PA 0x8000_0000 → SafeMemory offset 0x10000<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;});<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ ========================================================================<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ MMIO: Device registers (PA 0x10_0000_0000 - 0x20_0000_0000)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ ========================================================================<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;m_routes.append({<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;.startPA &nbsp; &nbsp;= 0x10_0000_0000,<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;.endPA &nbsp; &nbsp; &nbsp;= 0x20_0000_0000,<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;.target &nbsp; &nbsp; = RouteTarget::MMIOManager,<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;.offsetBase = 0x0 &nbsp;\/\/ MMIO uses absolute PA (no offset translation)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;});<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;INFO_LOG(&quot;GuestMemory: PA routing table initialized (Option A)&quot;);<\/p>\n\r<p class=\"p_Normal\">}<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">### Routing Logic<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">MEM_STATUS GuestMemory::readPA(quint64 pa, quint8 width, quint64&amp; outValue) const noexcept<\/p>\n\r<p class=\"p_Normal\">{<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ Find route<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;const PARouteEntry* route = findRoute(pa);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;if (!route) {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;return MEM_STATUS::AccessViolation; &nbsp;\/\/ Unmapped PA<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;}<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ Route to target<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;switch (route-&gt;target) {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;case RouteTarget::SafeMemory:<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;{<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;\/\/ Calculate SafeMemory offset<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;quint64 offset = (pa - route-&gt;startPA) + route-&gt;offsetBase;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;\/\/ Route to SafeMemory<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;return m_safeMem-&gt;load(offset, width, outValue);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;}<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;case RouteTarget::SRMFirmware:<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;{<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;\/\/ Calculate SRM firmware offset<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;quint64 offset = pa - route-&gt;startPA; &nbsp;\/\/ offsetBase = 0<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;\/\/ Route to SRM firmware (read-only)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;return m_srm-&gt;read(offset, width, outValue);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;}<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;case RouteTarget::MMIOManager:<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;{<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;\/\/ MMIO uses absolute PA (no offset)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;return m_mmio-&gt;handleRead(pa, width, outValue);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;}<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;default:<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;return MEM_STATUS::AccessViolation;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;}<\/p>\n\r<p class=\"p_Normal\">}<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">## SAFEMEMORY INITIALIZATION<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">bool SafeMemory::initialize(quint64 sizeBytes) noexcept<\/p>\n\r<p class=\"p_Normal\">{<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ Size calculation: Low 64 KB + Main RAM 32 GB<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;const quint64 lowMemSize = 0x0001_0000; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \/\/ 64 KB<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;const quint64 mainRamSize = 0x8_0000_0000; &nbsp; &nbsp; &nbsp; &nbsp;\/\/ 32 GB<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;const quint64 totalSize = lowMemSize + mainRamSize;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;if (sizeBytes != totalSize) {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;ERROR_LOG(QString(&quot;SafeMemory: Expected size 0x%1, got 0x%2&quot;)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.arg(totalSize, 16, 16, QChar(\'0\'))<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.arg(sizeBytes, 16, 16, QChar(\'0\')));<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;return false;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;}<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ Create sparse backing<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;m_backing = std::make_unique&lt;SparseMemoryBacking&gt;();<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;if (!m_backing-&gt;allocate(totalSize)) {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;ERROR_LOG(&quot;SafeMemory: Failed to allocate sparse backing&quot;);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;return false;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;}<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;m_sizeBytes = totalSize;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;INFO_LOG(QString(&quot;SafeMemory: Initialized with %1 GB total&quot;)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;.arg(totalSize \/ (1024.0 * 1024.0 * 1024.0)));<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;INFO_LOG(QString(&quot; &nbsp;Low memory: 64 KB (offsets 0x0 - 0x10000)&quot;));<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;INFO_LOG(QString(&quot; &nbsp;Main RAM: &nbsp; 32 GB (offsets 0x10000 - 0x8_0001_0000)&quot;));<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;return true;<\/p>\n\r<p class=\"p_Normal\">}<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">## HWRPB INITIALIZATION (Lives in SafeMemory!)<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">bool initializeHWRPB() noexcept<\/p>\n\r<p class=\"p_Normal\">{<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ HWRPB is at PA 0x2000<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;const quint64 hwrpbPA = 0x0000_2000;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ Get span from GuestMemory (routes to SafeMemory)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;Span hwrpbSpan = m_guestMemory-&gt;getSpanToPA(hwrpbPA, 0x4000, WriteOnly);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;if (hwrpbSpan.len &lt; 0x4000) {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;ERROR_LOG(&quot;Failed to get HWRPB span&quot;);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;return false;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;}<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ Zero entire HWRPB region<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;memset(hwrpbSpan.data, 0, 0x4000);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ Cast to HWRPB structure<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;AlphaHWRPB* hwrpb = reinterpret_cast&lt;AlphaHWRPB*&gt;(hwrpbSpan.data);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ Populate HWRPB fields<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;hwrpb-&gt;physicalBase = 0x2000;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;hwrpb-&gt;signature = 0x4250525748ULL; &nbsp;\/\/ &quot;HWRPB&quot;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;hwrpb-&gt;revision = 6;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;hwrpb-&gt;size = 0x4000;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;hwrpb-&gt;pageSize = 8192;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ ... etc ...<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;INFO_LOG(&quot;HWRPB initialized in SafeMemory at PA 0x2000&quot;);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;return true;<\/p>\n\r<p class=\"p_Normal\">}<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">**Key point**: No AlphaMemorySystem! HWRPB lives in SafeMemory just like any other data.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">## SPAN-BASED ACCESS FOR CSERVE<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">### Span Structure<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">struct Span {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;quint8* data; &nbsp; &nbsp;\/\/ Pointer to memory (nullptr if invalid)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;quint64 len; &nbsp; &nbsp; \/\/ Valid length (0 if error, truncated at page boundary)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;bool writable; &nbsp; \/\/ Read-only or read-write<\/p>\n\r<p class=\"p_Normal\">};<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">enum class AccessIntent : quint8 {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;ReadOnly,<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;WriteOnly,<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;ReadWrite<\/p>\n\r<p class=\"p_Normal\">};<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">### GuestMemory::getSpanToPA<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">Span GuestMemory::getSpanToPA(quint64 pa, quint64 requestedLen, AccessIntent intent) noexcept<\/p>\n\r<p class=\"p_Normal\">{<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ Find route<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;const PARouteEntry* route = findRoute(pa);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;if (!route) {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;return {nullptr, 0, false}; &nbsp;\/\/ Unmapped<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;}<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ Check if target supports spans<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;if (route-&gt;target == RouteTarget::MMIOManager) {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;return {nullptr, 0, false}; &nbsp;\/\/ MMIO doesn\'t support direct spans<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;}<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ Calculate offset<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;quint64 offset = (pa - route-&gt;startPA) + route-&gt;offsetBase;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ Route to subsystem<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;switch (route-&gt;target) {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;case RouteTarget::SafeMemory:<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;return m_safeMem-&gt;getSpan(offset, requestedLen, intent);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;case RouteTarget::SRMFirmware:<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;if (intent != AccessIntent::ReadOnly) {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return {nullptr, 0, false}; &nbsp;\/\/ SRM is read-only<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;}<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;return m_srm-&gt;getSpan(offset, requestedLen);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;default:<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;return {nullptr, 0, false};<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;}<\/p>\n\r<p class=\"p_Normal\">}<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">### SafeMemory::getSpan<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">Span SafeMemory::getSpan(quint64 offset, quint64 requestedLen, AccessIntent intent) noexcept<\/p>\n\r<p class=\"p_Normal\">{<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ Validate offset<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;if (offset &gt;= m_sizeBytes) {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;return {nullptr, 0, false};<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;}<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ Truncate to page boundary (64 KB)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;const quint64 pageSize = 64 * 1024;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;const quint64 offsetInPage = offset % pageSize;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;const quint64 bytesAvailInPage = pageSize - offsetInPage;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;const quint64 actualLen = std::min(requestedLen, bytesAvailInPage);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ Get page index<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;const qsizetype pageIdx = static_cast&lt;qsizetype&gt;(offset \/ pageSize);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ Ensure page exists<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;quint8* page = m_backing-&gt;ensurePage(pageIdx);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;if (!page) {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;return {nullptr, 0, false}; &nbsp;\/\/ Allocation failed<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;}<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ Return span<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;return {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;.data = page + offsetInPage,<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;.len = actualLen,<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;.writable = (intent != AccessIntent::ReadOnly)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;};<\/p>\n\r<p class=\"p_Normal\">}<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">### CSERVE PUTS Using Span Pattern<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">case 0x09: &nbsp;\/\/ PUTS - Put String<\/p>\n\r<p class=\"p_Normal\">{<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;quint64 bufferVA = slot.regs[17]; &nbsp;\/\/ a1 = buffer VA<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;quint64 length = slot.regs[18]; &nbsp; &nbsp;\/\/ a2 = length<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;quint64 remaining = length;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;quint64 currentVA = bufferVA;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;quint64 totalWritten = 0;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;while (remaining &gt; 0) {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;\/\/ Translate current VA → PA<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;quint64 pa = 0;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;if (translateVA_Load(slot.cpuId, currentVA, pa) != TranslationResult::Success) {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;slot.regs[0] = totalWritten; &nbsp;\/\/ Return bytes written so far<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;break;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;}<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;\/\/ Get span to guest buffer (may be truncated at page boundary)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;Span span = m_guestMemory-&gt;getSpanToPA(pa, remaining, AccessIntent::ReadOnly);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;if (span.len == 0) {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\/\/ Invalid address or MMIO<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;slot.regs[0] = totalWritten;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;break;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;}<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;\/\/ Write this chunk to console<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;quint64 written = consoleMgr.putStringToOPA(0, span.data, span.len);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;if (written != span.len) {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\/\/ Console error<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;slot.regs[0] = totalWritten + written;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;break;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;}<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;\/\/ Advance<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;totalWritten += written;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;currentVA += written;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;remaining -= written;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;}<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;slot.regs[0] = totalWritten; &nbsp;\/\/ Return total bytes written<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;break;<\/p>\n\r<p class=\"p_Normal\">}<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">**Correctness**: Handles page boundaries, sparse pages, translation failures.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">## ELIMINATION OF ALPHAMEMORY SYSTEM<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">### Before (WRONG - Duplication)<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">AlphaMemorySystem has:<\/p>\n\r<p class=\"p_Normal\"> &nbsp;- m_palBuffer (64 KB) &nbsp; &nbsp; ← DUPLICATE of SafeMemory offsets 0x0 - 0x10000<\/p>\n\r<p class=\"p_Normal\"> &nbsp;- m_hwrpbBuffer (16 KB) &nbsp; ← DUPLICATE of SafeMemory offsets 0x2000 - 0x6000<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">### After (CORRECT - Single Truth)<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">AlphaMemorySystem REMOVED ENTIRELY<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">HWRPB initialization:<\/p>\n\r<p class=\"p_Normal\"> &nbsp;- Gets span from GuestMemory at PA 0x2000<\/p>\n\r<p class=\"p_Normal\"> &nbsp;- Writes directly to SafeMemory<\/p>\n\r<p class=\"p_Normal\"> &nbsp;- No duplication, no synchronization needed<\/p>\n\r<p class=\"p_Normal\"> &nbsp;<\/p>\n\r<p class=\"p_Normal\">PAL emulation:<\/p>\n\r<p class=\"p_Normal\"> &nbsp;- PAL is C++ code, not a memory region<\/p>\n\r<p class=\"p_Normal\"> &nbsp;- No storage needed<\/p>\n\r<p class=\"p_Normal\"> &nbsp;- CALL_PAL instructions execute C++ handlers<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">## IMPLEMENTATION CHECKLIST<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">- [ ] Remove AlphaMemorySystem storage (m_palBuffer, m_hwrpbBuffer)<\/p>\n\r<p class=\"p_Normal\">- [ ] Update GuestMemory route table (two SafeMemory regions)<\/p>\n\r<p class=\"p_Normal\">- [ ] Implement offsetBase calculation in routing<\/p>\n\r<p class=\"p_Normal\">- [ ] Update SafeMemory initialization (64 KB + 32 GB)<\/p>\n\r<p class=\"p_Normal\">- [ ] Implement Span structure<\/p>\n\r<p class=\"p_Normal\">- [ ] Implement GuestMemory::getSpanToPA()<\/p>\n\r<p class=\"p_Normal\">- [ ] Implement SafeMemory::getSpan()<\/p>\n\r<p class=\"p_Normal\">- [ ] Implement SRMFirmwareRegion::getSpan()<\/p>\n\r<p class=\"p_Normal\">- [ ] Update HWRPB initialization (use span, not separate buffer)<\/p>\n\r<p class=\"p_Normal\">- [ ] Update CSERVE PUTS\/GETS (use span loop pattern)<\/p>\n\r<p class=\"p_Normal\">- [ ] Verify no QVector\/QByteArray in hot paths<\/p>\n\r<p class=\"p_Normal\">- [ ] Test cross-page access with spans<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">## MEMORY MAP VISUAL<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_CodeExample\">```<\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">PA&nbsp;Space:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SafeMemory&nbsp;Internal:<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">0x0000_0000&nbsp;┌─────────────┐&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x0000_0000&nbsp;┌─────────────┐<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;Low&nbsp;Memory&nbsp;&nbsp;│&nbsp;&nbsp;─────────────────&gt;&nbsp;│&nbsp;Low&nbsp;64&nbsp;KB&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;(64&nbsp;KB)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">0x0000_2000&nbsp;│&nbsp;&nbsp;[HWRPB]&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;[HWRPB&nbsp;at&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;+0x2000]&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">0x0001_0000&nbsp;├─────────────┤&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x0001_0000&nbsp;├─────────────┤<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;Unmapped&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;Main&nbsp;RAM&nbsp;&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;(~512&nbsp;MB)&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;(32&nbsp;GB)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">0x2000_0000&nbsp;├─────────────┤&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;SRM&nbsp;Firmware│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;(2&nbsp;MB)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;──&gt;&nbsp;SRMFirmware&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">0x2020_0000&nbsp;├─────────────┤&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;Unmapped&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;(~1.5&nbsp;GB)&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">0x8000_0000&nbsp;├─────────────┤&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x0001_0000&nbsp;│&nbsp;(continued)&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;Main&nbsp;RAM&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;─────────────────&gt;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;(32&nbsp;GB)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">0x8_8000_000├─────────────┤&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x8_0001_000└─────────────┘<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;Unmapped&nbsp;&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">0x10_0000_00├─────────────┤<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;MMIO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;──&gt;&nbsp;MMIOManager<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;(64&nbsp;GB)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">0x20_0000_00└─────────────┘<\/span><\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">**This is your canonical PA routing table implementing Option A!**<\/p>\n\r"
})
