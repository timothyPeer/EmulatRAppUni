hmLoadTopic({
hmKeywords:"",
hmTitle:"22.5 Memory Ordering and LL\/SC Validation",
hmDescription:"22.5.1 Memory Ordering Validation  Memory model validation focuses on: visibility ordering (stores become visible to other CPUs in the correct order after barriers), store...",
hmPrevLink:"22_4-exception-and-fault-valid.html",
hmNextLink:"22_6-pal-and-privilege-boundar.html",
hmParentLink:"chapter-22---testing_-validati.html",
hmBreadCrumbs:"<a href=\"license-_-attributions.html\">ASA-EMulatR Reference Guide<\/a> &gt; <a href=\"index.html\">Introduction<\/a> &gt; <a href=\"architecture-overview.html\">Architecture Overview<\/a> &gt; <a href=\"chapter-22---testing_-validati.html\">Chapter 22 – Testing, Validation, and Architectural Compliance<\/a>",
hmTitlePath:"ASA-EMulatR Reference Guide > Introduction > Architecture Overview > Chapter 22 – Testing, Validation, and Architectural Compliance > 22.5 Memory Ordering and LL\/SC Validation",
hmHeader:"<h1 class=\"p_Heading1\" style=\"page-break-after: avoid;\"><span class=\"f_Heading1\">22.5 Memory Ordering and LL\/SC Validation<\/span><\/h1>\n\r",
hmBody:"<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">22.5.1 Memory Ordering Validation<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">Memory model validation focuses on: visibility ordering (stores become visible to other CPUs in the correct order after barriers), store buffering behavior (write buffer drains at correct serialization points), barrier enforcement (MB produces global visibility, WMB produces local write ordering, EXCB resolves pending exceptions before continuation), and cross-CPU ordering (stores committed by CPU A are visible to CPU B after the appropriate barrier sequence completes).<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">Tests include: store-load reordering scenarios (verify that loads after MB see stores from before MB on another CPU), barrier release edge cases (verify that barriers release only when all conditions are met), DMA vs CPU ordering (verify that DMA completions are visible after the device signals completion), and false sharing scenarios (verify that stores to adjacent-but-distinct cache lines do not interfere with reservations on non-overlapping addresses).<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">Failures in memory ordering validation are considered critical correctness violations — they indicate that the memory model contract is broken, which invalidates all higher-level assumptions about SMP correctness.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<hr style=\"height:1px; color:#000000; border-width:0; background-color:#000000;\" \/><p class=\"p_Normal\">&nbsp;<\/p>\n\r<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">22.5.2 LL\/SC Validation<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">LL\/SC validation verifies: reservation granularity (cache-line level, 64 bytes on EV6), reservation invalidation rules (any store to the same cache line from any CPU breaks the reservation), failure semantics (STx_C returns 0 in Ra and does not write memory), and SMP contention behavior (multiple CPUs contending on the same cache line produce correct forward progress guarantees).<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">Specific tests: multiple CPUs performing concurrent LL\/SC to the same cache line (exactly one succeeds per round), false sharing on adjacent addresses within the same cache line (reservation broken even though different bytes are targeted), exception-induced reservation clearing (LL followed by fault → STx_C must fail), barrier-induced clearing (LL followed by MB → STx_C must fail), and PAL boundary clearing (LL followed by CALL_PAL → STx_C must fail).<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">LL\/SC correctness is mandatory for OS-level correctness — operating systems rely on atomic sequences for lock acquisition, reference counting, and concurrent data structure manipulation.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_SeeAlso\" style=\"page-break-after: avoid;\"><span class=\"f_SeeAlso\">See Also: <a href=\"chapter-5_11-load-locked-_-sto.html\" class=\"topiclink\">5.11 Load-Locked \/ Store-Conditional (LL\/SC)<\/a> ; <a href=\"chapter-6---serialization-and-.html\" class=\"topiclink\">Chapter 6 - Serialization and Stall Model<\/a> &nbsp;(barrier validation targets).<\/span><\/p>\n\r"
})
