hmLoadTopic({
hmKeywords:"Global_HWPCBBank_Interface.h,HWPCB_core.h",
hmTitle:"globalHWPCBManager)",
hmDescription:"inline HwpcbManager& globalHwpcbManager() {     static HwpcbManager instance;     return instance; }    Host the Alpha Hardware Process Context Block (HWPCB )  #ifndef HW",
hmPrevLink:"",
hmNextLink:"",
hmParentLink:"appendix---trait-examples.html",
hmBreadCrumbs:"",
hmTitlePath:"ASA-EMulatR Reference Guide > Introduction > Appendix > Appendix I – Glossary and Acronyms",
hmHeader:"<h1 class=\"p_Heading1\" style=\"page-break-after: avoid;\"><span class=\"f_Heading1\">globalHWPCBManager)<\/span><\/h1>\n\r",
hmBody:"<p class=\"p_Normal\">inline HwpcbManager&amp; globalHwpcbManager()<\/p>\n\r<p class=\"p_Normal\">{<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;static HwpcbManager instance;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;return instance;<\/p>\n\r<p class=\"p_Normal\">}<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">Host the Alpha Hardware Process Context Block (HWPCB )<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">#ifndef&nbsp;HWPCB_SLOT_COUNT<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">#define&nbsp;HWPCB_SLOT_COUNT&nbsp;8&nbsp;&nbsp;\/\/&nbsp;Typical:&nbsp;0=Active,&nbsp;1..7=PALtemp,&nbsp;or&nbsp;more&nbsp;for&nbsp;multiprocess<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">#endif<\/span><\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><strong style=\"font-weight: bold;\">Considerations: <\/strong> Each CPU requires two slots: &nbsp;(1) Active context, (2) SWPCTX &quot;saved&quot; context<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Notes\"><span class=\"f_Notes\">Notes: <\/span><\/p>\n\r<p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>gHWPCBBank is global and indexable by CPU ID and HWPCB slot.<\/p>\n\r<p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>context_save and context_restore use plain copy assignment (so ensure HWPCB is POD or implements copy\/clear).<\/p>\n\r<p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>resetAll calls your HWPCB\'s reset() on every slot.<\/p>\n\r<p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>Scales to expand the slot count for more PALtemp, process, or interrupt context slots as needed.<\/p>\n\r<p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>The CPU always accesses the global bank via [cpuId][slot].<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">During SWPCTX or when context state must be save: <\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">quint8&nbsp;cpuid&nbsp;=&nbsp;0;&nbsp;<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">\/\/&nbsp;Save&nbsp;active&nbsp;CPU&nbsp;0’s&nbsp;context&nbsp;into&nbsp;shadow&nbsp;slot&nbsp;5<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">hwpcb_context_save(cpuid);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/\/&nbsp;slot&nbsp;0&nbsp;-&gt;&nbsp;slot&nbsp;5<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">\/\/&nbsp;Restore&nbsp;from&nbsp;shadow&nbsp;slot&nbsp;5&nbsp;back&nbsp;into&nbsp;slot&nbsp;0&nbsp;(active)<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">hwpcb_context_restore(cpuid);&nbsp;&nbsp;\/\/&nbsp;slot&nbsp;5&nbsp;-&gt;&nbsp;slot&nbsp;0<\/span><\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">Reset Operations: <\/p>\n\r<p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>IPRStorage::reset()<\/p>\n\r<p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>gHPWCBank()::resetAll()<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">If you want multiple context save slots, you can increase the offset (e.g. for nested interrupts).<\/p>\n\r<p class=\"p_Normal\"> --------------------------------------------------------------------------------------------------------<\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">\/\/&nbsp;Usage&nbsp;Example:<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">\/\/<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">\/\/&nbsp;Initialization&nbsp;(at&nbsp;startup)<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;gHWPCBBank-&gt;resize(numCPUs,&nbsp;HWPCB_SLOT_COUNT);&nbsp;&nbsp;&nbsp;e.g.,&nbsp;4&nbsp;CPUs,&nbsp;8&nbsp;slots&nbsp;each<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">\/\/&nbsp;Access&nbsp;current\/active&nbsp;slot&nbsp;(e.g.,&nbsp;slot&nbsp;0)<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;HWPCB&amp;&nbsp;active&nbsp;=&nbsp;gHWPCBBank-&gt;operator()(cpuId,&nbsp;0);<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">\/\/&nbsp;&nbsp;Save\/restore&nbsp;PALtemp&nbsp;slots<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;gHWPCBBank-&gt;context_save(cpuId,&nbsp;\/*src=*\/0,&nbsp;\/*dst=*\/1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Save&nbsp;active&nbsp;to&nbsp;PALtemp[1]<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;gHWPCBBank-&gt;context_restore(cpuId,&nbsp;\/*src=*\/1,&nbsp;\/*dst=*\/0);&nbsp;&nbsp;&nbsp;&nbsp;Restore&nbsp;PALtemp[1]&nbsp;to&nbsp;active<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">\/\/&nbsp;&nbsp;Reset&nbsp;all&nbsp;slots&nbsp;for&nbsp;all&nbsp;CPUs<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;gHWPCBBank-&gt;resetAll();<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;<\/span><\/p>\n\r<p class=\"p_CodeExample\"><strong style=\"font-weight: bold;\">Source&nbsp;Code:<\/strong><\/p>\n\r<p class=\"p_CodeExample\">CoreLib::HWPCB_core.h,&nbsp;Global_HWPCBBank_Interface.h<\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;<\/span><\/p>\n\r"
})
