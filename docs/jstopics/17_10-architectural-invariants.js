hmLoadTopic({
hmKeywords:"",
hmTitle:"17.10 Architectural Invariants (Normative)",
hmDescription:"The following invariants govern the address translation subsystem. Violation of any invariant constitutes an emulator bug.",
hmPrevLink:"17_9-ibox-instruction-translat.html",
hmNextLink:"17_11-repository-directory-map.html",
hmParentLink:"chapter-17---tlb_-pte_-and-add.html",
hmBreadCrumbs:"<a href=\"index.html\">Introduction<\/a> &gt; <a href=\"architecture-overview.html\">Architecture Overview<\/a> &gt; <a href=\"chapter-17---tlb_-pte_-and-add.html\">Chapter 17 – Address Translation, TLB, and PTE<\/a>",
hmTitlePath:"Introduction > Architecture Overview > Chapter 17 – Address Translation, TLB, and PTE > 17.10 Architectural Invariants (Normative)",
hmHeader:"<h1 class=\"p_Heading1\" style=\"page-break-after: avoid;\"><span class=\"f_Heading1\">17.10 Architectural Invariants (Normative)<\/span><\/h1>\n\r",
hmBody:"<p class=\"p_Normal\">The following invariants govern the address translation subsystem. Violation of any invariant constitutes an emulator bug.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><span style=\"font-weight: bold;\">Layer Isolation:<\/span> Layer 0 (SPAMShardManager) never walks page tables. Layer 1 (Ev6TLBInterface) provides only lookup\/insert\/invalidate operations. Layer 2 (PAL\/MMU) is the exclusive location for page table walk logic.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><span style=\"font-weight: bold;\">Per-CPU Isolation:<\/span> Each CPU\'s SPAM shard is fully independent. TLB lookup on CPU N never touches CPU M\'s shard. Only explicit shootdown IPIs or system-wide invalidation methods cross CPU boundaries.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><span style=\"font-weight: bold;\">Translation Locality:<\/span> Data address translation occurs only in MBox during the EX stage. Instruction address translation occurs only in IBox during the IF stage. No other pipeline stage performs translation.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><span style=\"font-weight: bold;\">Shootdown Synchrony:<\/span> TLB shootdown is always explicit and synchronized. The initiating CPU stalls until all target CPUs have acknowledged. No CPU may execute with a stale TLB entry after a shootdown completes.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><span style=\"font-weight: bold;\">Reservation Clearing:<\/span> Any translation invalidation (TBIA, TBIAP, TBIS, or IPR-triggered invalidation) must clear LL\/SC reservations. No STx_C may succeed against a mapping that has been invalidated.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><span style=\"font-weight: bold;\">Configuration Immutability:<\/span> The VA option (page size, level bits, VA width) is selected once at configuration time and is immutable at runtime. TLB lookup uses the selected option exclusively — no per-lookup option scanning.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><span style=\"font-weight: bold;\">Canonical Enforcement:<\/span> Non-canonical virtual addresses produce a translation fault. Canonicality is checked before TLB lookup.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_SeeAlso\" style=\"page-break-after: avoid;\"><span class=\"f_SeeAlso\">See Also: <a href=\"chapter-11---architectural-inv.html\" class=\"topiclink\">Chapter 11 - Architectural Invariants (complete invariant reference)<\/a>.<\/span><\/p>\n\r"
})
