hmLoadTopic({
hmKeywords:"",
hmTitle:"Grains",
hmDescription:"Lock-free with versioning! This is production-grade:",
hmPrevLink:"",
hmNextLink:"",
hmParentLink:"appendix---trait-examples.html",
hmBreadCrumbs:"",
hmTitlePath:"ASA-EMulatR Reference Guide > Introduction > Appendix > Appendix I – Glossary and Acronyms",
hmHeader:"<h1 class=\"p_Heading1\" style=\"page-break-after: avoid;\"><span class=\"f_Heading1\">Grains<\/span><\/h1>\n\r",
hmBody:"<p class=\"p_Normal\">Lock-free with versioning! This is production-grade:<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">Uses a Lock-Free Set-Associative Cache with support for I-cache coherence and SMP detection.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">✅ Concurrent readers don\'t block<\/p>\n\r<p class=\"p_Normal\">✅ Version checking prevents torn reads<\/p>\n\r<p class=\"p_Normal\">✅ Set-associative (4-way) for good hit rates<\/p>\n\r<p class=\"p_Normal\">✅ LRU eviction with accessCount<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">i-Grain Cache uses generation-based invalidations: <\/p>\n\r<p class=\"p_Normal\">Invalidations in cache are never walked, we bump the generation counter. Invalidation is lazy - the next lookup fails to match generation and is cached. <\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><strong style=\"font-weight: bold;\">Coherence Model: <\/strong><\/p>\n\r<p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>Self-modifying code → invalidate PA<\/p>\n\r<p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>Context switch → invalidate PC (VA changes)<\/p>\n\r<p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 0.8125rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"font-family: Arial,\'Lucida Sans Unicode\',\'Lucida Grande\',\'Lucida Sans\';display:inline-block;width:0.8125rem;margin-left:-0.8125rem\">&#8226;<\/span>Page unmap → invalidate PA range<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><strong style=\"font-weight: bold;\">Order of Operations. <\/strong><\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">GrainResolver::ResolveGrain(raw)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;↓<\/p>\n\r<p class=\"p_Normal\">InstructionGrainRegistry::lookup(opcode, func, platform)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;↓<\/p>\n\r<p class=\"p_Normal\">InstructionGrain* (cached in registry)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;↓<\/p>\n\r<p class=\"p_Normal\">decodeInstruction(di, raw, grain, pc) &nbsp;\/\/ From iGrain-DualLookup_inl.h<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;↓<\/p>\n\r<p class=\"p_Normal\">DecodedInstruction (cached in pcDecodeCache\/paDecodeCache)<\/p>\n\r"
})
