hmLoadTopic({
hmKeywords:"",
hmTitle:"10.12 SMP and Error Handling",
hmDescription:"10.12.1 SMP Considerations  In SMP systems: devices are globally visible (all CPUs can access any MMIO region), MMIO ordering is global (strongly ordered regardless of which CPU",
hmPrevLink:"10_11-pal-and-device-control.html",
hmNextLink:"10_13-summary.html",
hmParentLink:"chapter-10---devices-and-mmio.html",
hmBreadCrumbs:"<a href=\"index.html\">Introduction<\/a> &gt; <a href=\"architecture-overview.html\">Architecture Overview<\/a> &gt; <a href=\"chapter-10---devices-and-mmio.html\">Chapter 10 – Devices and Memory-Mapped I\/O (MMIO)<\/a>",
hmTitlePath:"Introduction > Architecture Overview > Chapter 10 – Devices and Memory-Mapped I\/O (MMIO) > 10.12 SMP and Error Handling",
hmHeader:"<h1 class=\"p_Heading1\" style=\"page-break-after: avoid;\"><span class=\"f_Heading1\">10.12 SMP and Error Handling<\/span><\/h1>\n\r",
hmBody:"<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">10.12.1 SMP Considerations<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">In SMP systems: devices are globally visible (all CPUs can access any MMIO region), MMIO ordering is global (strongly ordered regardless of which CPU initiates the access), interrupts may target specific CPUs (via IRQ affinity in IrqTemplate), DMA affects shared GuestMemory (visible to all CPUs after cache coherency operations), and barriers may be required for cross-CPU coordination when one CPU sets up DMA descriptors and another CPU initiates the device command.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">Devices themselves are not CPU-affine unless explicitly configured. The IDeviceEmulator threading model specifies that onRead\/onWrite may be called concurrently from multiple vCPU threads — devices must provide their own internal locking if needed.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<hr style=\"height:1px; color:#000000; border-width:0; background-color:#000000;\" \/><p class=\"p_Normal\">&nbsp;<\/p>\n\r<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">10.12.2 Error Handling<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">MMIO access may generate faults: alignment faults (MMIOStatus::ALIGNMENT_FAULT), bus errors (MMIOStatus::BUS_ERROR → machine check), invalid address (MMIOStatus::INVALID_ADDRESS), permission violations (READ_ONLY, WRITE_ONLY, PERMISSION_DENIED), and device-specific errors (DEVICE_ERROR, TIMEOUT).<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">These faults are detected synchronously during the MMIO access, delivered precisely through the normal exception path, and enter PAL through exception vectors. Device errors do not corrupt CPU state.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">Degraded devices are tracked via DegradedDeviceEntry and DegradedDeviceInfo structures — devices that fail initialization or resource allocation are recorded with the failure reason and timestamp, allowing the system to boot with reduced functionality rather than aborting.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_SeeAlso\" style=\"page-break-after: avoid;\"><span class=\"f_SeeAlso\">See Also: <a href=\"chapter9-smparchitecture.html\" class=\"topiclink\">Chapter 9 - SMP Architecture<\/a>; coreLib\/mmio_core.h (MMIOStatus, DegradedDeviceEntry).<\/span><\/p>\n\r"
})
