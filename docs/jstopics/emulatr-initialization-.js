hmLoadTopic({
hmKeywords:"",
hmTitle:"EmulatR Initialization",
hmDescription:"# EmulatR Initialization Architecture  **Version:** 1.0   **Date:** December 2025   **Pattern:** QScopedPointer + Meyer\'s Singleton  ---  ## Overview  The EmulatR initial",
hmPrevLink:"",
hmNextLink:"",
hmParentLink:"appendix---trait-examples.html",
hmBreadCrumbs:"",
hmTitlePath:"ASA-EMulatR Reference Guide > Introduction > Appendix > Appendix I – Glossary and Acronyms",
hmHeader:"<h1 class=\"p_Heading1\" style=\"page-break-after: avoid;\"><span class=\"f_Heading1\">EmulatR Initialization <\/span><\/h1>\n\r",
hmBody:"<p class=\"p_Normal\"># EmulatR Initialization Architecture<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">**Version:** 1.0 &nbsp;<\/p>\n\r<p class=\"p_Normal\">**Date:** December 2025 &nbsp;<\/p>\n\r<p class=\"p_Normal\">**Pattern:** QScopedPointer + Meyer\'s Singleton<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">## Overview<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">The EmulatR initialization subsystem uses a **hidden initialization pattern** where:<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">1. **QScopedPointer** manages object lifetime (automatic cleanup)<\/p>\n\r<p class=\"p_Normal\">2. **Meyer\'s Singleton** provides global access<\/p>\n\r<p class=\"p_Normal\">3. **main.cpp** only tracks initialization, doesn\'t perform it<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">This provides:<\/p>\n\r<p class=\"p_Normal\">- ✅ Clean separation of concerns<\/p>\n\r<p class=\"p_Normal\">- ✅ Automatic resource cleanup<\/p>\n\r<p class=\"p_Normal\">- ✅ Single point of initialization<\/p>\n\r<p class=\"p_Normal\">- ✅ Easy testing and mock injection<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">## Architecture Diagram<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_CodeExample\">```<\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">┌─────────────────────────────────────────────────────────────┐<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;main.cpp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;┌─────────────────────────────────────────────────────┐&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;auto&amp;&nbsp;init&nbsp;=&nbsp;global_EmulatR_init();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;init.initializeSystem();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;init.initializeDeviceInterrupts();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;app.exec();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;└─────────────────────────────────────────────────────┘&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">└─────────────────────────────────────────────────────────────┘<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;▼<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">┌─────────────────────────────────────────────────────────────┐<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EmulatR_init&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;┌─────────────────────────────────────────────────────┐&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;QScopedPointer&lt;IRQController&gt;&nbsp;m_irqController&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;QScopedPointer&lt;SafeMemory&gt;&nbsp;m_safeMemory&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;QScopedPointer&lt;GuestMemory&gt;&nbsp;m_guestMemory&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;QScopedPointer&lt;PlatformAddressMap&gt;&nbsp;m_platformMap&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;└─────────────────────────────────────────────────────┘&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;┌─────────────────────────────────────────────────────┐&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;initializeSystem()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;├─&nbsp;Load&nbsp;config&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;├─&nbsp;Create&nbsp;IRQController&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;├─&nbsp;Create&nbsp;SafeMemory&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;├─&nbsp;Create&nbsp;GuestMemory&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;├─&nbsp;Initialize&nbsp;TLB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;└─&nbsp;Bind&nbsp;to&nbsp;SMPManager&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;initializeDeviceInterrupts()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;├─&nbsp;Register&nbsp;SCSI&nbsp;interrupt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;├─&nbsp;Register&nbsp;Ethernet&nbsp;interrupt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;└─&nbsp;Register&nbsp;Serial&nbsp;interrupt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;└─────────────────────────────────────────────────────┘&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">└─────────────────────────────────────────────────────────────┘<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;▼<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">┌─────────────────────────────────────────────────────────────┐<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Global&nbsp;Accessor&nbsp;Functions&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;┌─────────────────────────────────────────────────────┐&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;global_IRQController()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;└─&gt;&nbsp;global_EmulatR_init().irqController()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└─&gt;&nbsp;m_irqController.data()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;global_SafeMemory()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;└─&gt;&nbsp;global_EmulatR_init().safeMemory()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└─&gt;&nbsp;m_safeMemory.data()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;global_GuestMemory()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;└─&gt;&nbsp;global_EmulatR_init().guestMemory()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└─&gt;&nbsp;m_guestMemory.data()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">│&nbsp;&nbsp;└─────────────────────────────────────────────────────┘&nbsp;&nbsp;&nbsp;│<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">└─────────────────────────────────────────────────────────────┘<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">```<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;<\/span><\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">## File Structure<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">project\/<\/p>\n\r<p class=\"p_Normal\">├── main.cpp &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Entry point (tracking only)<\/p>\n\r<p class=\"p_Normal\">├── EmulatR_init.h &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Hidden initialization subsystem<\/p>\n\r<p class=\"p_Normal\">└── globals\/<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;├── global_IRQController.h &nbsp; &nbsp; &nbsp; &nbsp;# Wired to QScopedPointer<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;├── global_SafeMemory.h &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Wired to QScopedPointer<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;├── global_GuestMemory.h &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Wired to QScopedPointer<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;├── global_ReservationManager.h &nbsp; # Meyer\'s Singleton (unchanged)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;├── global_MMIOManager.h &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Meyer\'s Singleton (unchanged)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;└── global_PALVectorTable.h &nbsp; &nbsp; &nbsp; # Meyer\'s Singleton (unchanged)<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">## Key Components<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">### 1. **EmulatR_init** (Hidden Initialization)<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">**Location:** `EmulatR_init.h`<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">**Responsibilities:**<\/p>\n\r<p class=\"p_Normal\">- Load configuration from INI file<\/p>\n\r<p class=\"p_Normal\">- Create and own subsystems via QScopedPointer<\/p>\n\r<p class=\"p_Normal\">- Initialize subsystems in correct order<\/p>\n\r<p class=\"p_Normal\">- Wire subsystems to SMPManager<\/p>\n\r<p class=\"p_Normal\">- Provide accessors for global_*() functions<\/p>\n\r<p class=\"p_Normal\">- Automatic cleanup on destruction<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">**Key Methods:**<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">bool initializeSystem(const QString&amp; configPath);<\/p>\n\r<p class=\"p_Normal\">void initializeDeviceInterrupts();<\/p>\n\r<p class=\"p_Normal\">void initializeDevices();<\/p>\n\r<p class=\"p_Normal\">void shutdown();<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">IRQController* irqController() const;<\/p>\n\r<p class=\"p_Normal\">SafeMemory* safeMemory() const;<\/p>\n\r<p class=\"p_Normal\">GuestMemory* guestMemory() const;<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">### 2. **QScopedPointer Members**<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">**Owned by EmulatR_init:**<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">QScopedPointer&lt;IRQController&gt; m_irqController;<\/p>\n\r<p class=\"p_Normal\">QScopedPointer&lt;SafeMemory&gt; m_safeMemory;<\/p>\n\r<p class=\"p_Normal\">QScopedPointer&lt;GM_ALPHA::GuestMemory&gt; m_guestMemory;<\/p>\n\r<p class=\"p_Normal\">QScopedPointer&lt;PlatformAddressMap&gt; m_platformAddressMap;<\/p>\n\r<p class=\"p_Normal\">QScopedPointer&lt;IDeviceEmulator&gt; m_deviceEmulator;<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">**Benefits:**<\/p>\n\r<p class=\"p_Normal\">- Automatic deletion when EmulatR_init is destroyed<\/p>\n\r<p class=\"p_Normal\">- No manual delete required<\/p>\n\r<p class=\"p_Normal\">- Exception-safe (RAII pattern)<\/p>\n\r<p class=\"p_Normal\">- Clear ownership semantics<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">### 3. **Global Accessor Wiring**<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">**Pattern:**<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">\/\/ global_IRQController.h<\/p>\n\r<p class=\"p_Normal\">inline IRQController&amp; global_IRQController() noexcept {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;IRQController* irqCtrl = global_EmulatR_init().irqController();<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;Q_ASSERT(irqCtrl); &nbsp;\/\/ Ensure initialized<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;return *irqCtrl;<\/p>\n\r<p class=\"p_Normal\">}<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">**Flow:**<\/p>\n\r<p class=\"p_Normal\">1. User calls `global_IRQController()`<\/p>\n\r<p class=\"p_Normal\">2. Function calls `global_EmulatR_init()` (Meyer\'s Singleton)<\/p>\n\r<p class=\"p_Normal\">3. Returns `m_irqController.data()` from QScopedPointer<\/p>\n\r<p class=\"p_Normal\">4. Assert ensures initialization happened<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">## Initialization Sequence<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">### Phase 1: System Initialization<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">auto&amp; init = global_EmulatR_init();<\/p>\n\r<p class=\"p_Normal\">bool success = init.initializeSystem(&quot;Z:\/EmulatR\/CONFIG&quot;);<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">**Steps:**<\/p>\n\r<p class=\"p_Normal\">1. Load `ASAEmulatR.ini` configuration<\/p>\n\r<p class=\"p_Normal\">2. Extract CPU count, memory size, system type<\/p>\n\r<p class=\"p_Normal\">3. Validate configuration<\/p>\n\r<p class=\"p_Normal\">4. Initialize `GlobalCPUCount`<\/p>\n\r<p class=\"p_Normal\">5. Create `IRQController` (QScopedPointer)<\/p>\n\r<p class=\"p_Normal\">6. Create `SafeMemory` (QScopedPointer)<\/p>\n\r<p class=\"p_Normal\">7. Create `PlatformAddressMap` (QScopedPointer)<\/p>\n\r<p class=\"p_Normal\">8. Create `GuestMemory` (QScopedPointer)<\/p>\n\r<p class=\"p_Normal\">9. Initialize TLB system (`initializeGlobalPTE()`)<\/p>\n\r<p class=\"p_Normal\">10. Initialize `ReservationManager`<\/p>\n\r<p class=\"p_Normal\">11. Bind all subsystems to `SMPManager`<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">### Phase 2: Device Interrupt Registration<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">init.initializeDeviceInterrupts();<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">**Registers:**<\/p>\n\r<p class=\"p_Normal\">- SCSI controller → vector 0x800, IPL 20, CPU 0 (FIXED_CPU)<\/p>\n\r<p class=\"p_Normal\">- Ethernet controller → vector 0x810, IPL 20 (ROUND_ROBIN)<\/p>\n\r<p class=\"p_Normal\">- Serial port → vector 0x820, IPL 21, CPU 0 (FIXED_CPU)<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">### Phase 3: Device Initialization (Future)<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">init.initializeDevices();<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">**Will create:**<\/p>\n\r<p class=\"p_Normal\">- Device emulators (SCSI, Ethernet, Serial)<\/p>\n\r<p class=\"p_Normal\">- Timer devices<\/p>\n\r<p class=\"p_Normal\">- DMA controllers<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">## Usage Examples<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">### Example 1: Simple Initialization<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">int main(int argc, char *argv[]) {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;QCoreApplication app(argc, argv);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;auto&amp; init = global_EmulatR_init();<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;if (!init.initializeSystem()) {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;return 1;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;}<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;init.initializeDeviceInterrupts();<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;return app.exec();<\/p>\n\r<p class=\"p_Normal\">}<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">### Example 2: Using Global Accessors<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">\/\/ After initialization, anywhere in code:<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">void someFunction() {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ Access IRQ controller<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;auto&amp; irqCtrl = global_IRQController();<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;irqCtrl.assertIRQ(0x800); &nbsp;\/\/ SCSI interrupt<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ Access memory<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;auto&amp; safeMem = global_SafeMemory();<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;safeMem.write64(0x1000, 0xDEADBEEF);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ Access guest memory<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;auto&amp; guestMem = global_GuestMemory();<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;MEM_STATUS status = guestMem.read64(0x2000, data);<\/p>\n\r<p class=\"p_Normal\">}<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">### Example 3: Custom Configuration Path<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">int main(int argc, char *argv[]) {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;QCoreApplication app(argc, argv);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ Parse command line args<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;QString configPath = argc &gt; 1 <\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;? QString(argv[1]) <\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;: &quot;Z:\/EmulatR\/CONFIG&quot;;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;auto&amp; init = global_EmulatR_init();<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;if (!init.initializeSystem(configPath)) {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;qCritical() &lt;&lt; &quot;Failed to initialize with config:&quot; &lt;&lt; configPath;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;return 1;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;}<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;init.initializeDeviceInterrupts();<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;return app.exec();<\/p>\n\r<p class=\"p_Normal\">}<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">## Testing and Mocking<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">### Mock Initialization for Unit Tests<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">class EmulatR_init_Mock : public EmulatR_init {<\/p>\n\r<p class=\"p_Normal\">public:<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;bool initializeSystem(const QString&amp; configPath) override {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;\/\/ Mock implementation<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;m_irqController.reset(new IRQController_Mock(4));<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;m_safeMemory.reset(new SafeMemory_Mock());<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp; &nbsp; &nbsp;return true;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;}<\/p>\n\r<p class=\"p_Normal\">};<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">\/\/ In test:<\/p>\n\r<p class=\"p_Normal\">TEST_F(EmulatorTest, TestInterrupts) {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;auto&amp; init = global_EmulatR_init_Mock();<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;init.initializeSystem();<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;auto&amp; irqCtrl = global_IRQController();<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;EXPECT_TRUE(irqCtrl.assertIRQ(0x800));<\/p>\n\r<p class=\"p_Normal\">}<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">## Shutdown and Cleanup<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">**Automatic cleanup when application exits:**<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">\/\/ No manual cleanup needed!<\/p>\n\r<p class=\"p_Normal\">\/\/ QScopedPointer automatically deletes:<\/p>\n\r<p class=\"p_Normal\">\/\/ &nbsp; - IRQController<\/p>\n\r<p class=\"p_Normal\">\/\/ &nbsp; - SafeMemory<\/p>\n\r<p class=\"p_Normal\">\/\/ &nbsp; - GuestMemory<\/p>\n\r<p class=\"p_Normal\">\/\/ &nbsp; - PlatformAddressMap<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">\/\/ EmulatR_init destructor also calls:<\/p>\n\r<p class=\"p_Normal\">\/\/ &nbsp; - shutdownGlobalPTE()<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">## Migration from Old main.cpp<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">**Old main.cpp (manual initialization):**<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">int main(int argc, char *argv[]) {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;QCoreApplication app(argc, argv);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ Manual initialization (50+ lines)<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;auto&amp; config = global_EmulatorSettingsInline();<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;config.loadFromIni(&quot;Z:\/EmulatR\/CONFIG\/ASAEmulatR.ini&quot;);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;quint8 cpuCount = config.data.system.processorCount;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;quint64 ramSize = config.data.system.memorySizeGB * GB;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;global_SafeMemory().initialize(ramSize);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;GlobalCPUCount::initialize(cpuCount);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;global_ReservationManager().initialize();<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;auto&amp; smpMgr = SMPManager::instance();<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;smpMgr.setCpuCount(cpuCount);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;smpMgr.bindSafeMemory(&amp;global_SafeMemory());<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;smpMgr.bindIRQController(&amp;global_IRQController());<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;\/\/ ... 20 more lines ...<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;return app.exec();<\/p>\n\r<p class=\"p_Normal\">}<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">**New main.cpp (clean tracking):**<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">int main(int argc, char *argv[]) {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;QCoreApplication app(argc, argv);<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;auto&amp; init = global_EmulatR_init();<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;if (!init.initializeSystem()) return 1;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;init.initializeDeviceInterrupts();<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;return app.exec();<\/p>\n\r<p class=\"p_Normal\">}<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">**Reduction:** 50+ lines → 6 lines ✅<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">## Benefits Summary<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">| Aspect | Benefit |<\/p>\n\r<p class=\"p_Normal\">|--------|---------|<\/p>\n\r<p class=\"p_Normal\">| **Code Clarity** | main.cpp is 6 lines, easy to understand |<\/p>\n\r<p class=\"p_Normal\">| **Separation of Concerns** | Initialization hidden in EmulatR_init |<\/p>\n\r<p class=\"p_Normal\">| **Ownership** | QScopedPointer manages lifetime |<\/p>\n\r<p class=\"p_Normal\">| **Safety** | Automatic cleanup, no leaks |<\/p>\n\r<p class=\"p_Normal\">| **Testing** | Easy to mock and inject dependencies |<\/p>\n\r<p class=\"p_Normal\">| **Maintenance** | Single place to change initialization order |<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">## Troubleshooting<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">### Problem: Assertion failure in global_IRQController()<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">Q_ASSERT(irqCtrl); &nbsp;\/\/ Fails!<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">**Cause:** `initializeSystem()` was not called before accessing global.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">**Solution:**<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">\/\/ WRONG:<\/p>\n\r<p class=\"p_Normal\">auto&amp; irq = global_IRQController(); &nbsp;\/\/ No init!<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">\/\/ CORRECT:<\/p>\n\r<p class=\"p_Normal\">auto&amp; init = global_EmulatR_init();<\/p>\n\r<p class=\"p_Normal\">init.initializeSystem();<\/p>\n\r<p class=\"p_Normal\">auto&amp; irq = global_IRQController(); &nbsp;\/\/ ✅ Works<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">### Problem: QScopedPointer is null<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">SafeMemory* mem = global_EmulatR_init().safeMemory();<\/p>\n\r<p class=\"p_Normal\">\/\/ mem is nullptr!<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">**Cause:** Initialization failed silently.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">**Solution:** Check return value:<\/p>\n\r<p class=\"p_Normal\">```cpp<\/p>\n\r<p class=\"p_Normal\">if (!init.initializeSystem()) {<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;qCritical() &lt;&lt; &quot;Initialization failed!&quot;;<\/p>\n\r<p class=\"p_Normal\"> &nbsp; &nbsp;return 1;<\/p>\n\r<p class=\"p_Normal\">}<\/p>\n\r<p class=\"p_Normal\">```<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">---<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">## Conclusion<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">The EmulatR hidden initialization pattern provides:<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">1. ✅ **Clean main.cpp** - tracks initialization, doesn\'t perform it<\/p>\n\r<p class=\"p_Normal\">2. ✅ **Automatic cleanup** - QScopedPointer handles destruction<\/p>\n\r<p class=\"p_Normal\">3. ✅ **Single source of truth** - EmulatR_init owns initialization<\/p>\n\r<p class=\"p_Normal\">4. ✅ **Easy testing** - mockable dependencies<\/p>\n\r<p class=\"p_Normal\">5. ✅ **Production-ready** - error handling, validation, logging<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">**Result:** A professional, maintainable initialization architecture.<\/p>\n\r"
})
