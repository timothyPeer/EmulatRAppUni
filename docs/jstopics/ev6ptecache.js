hmLoadTopic({
hmKeywords:"",
hmTitle:"Ev6PteCache",
hmDescription:"How EV6 uses two DTB banks (“Pipe 0” and “Pipe 1”)",
hmPrevLink:"",
hmNextLink:"",
hmParentLink:"appendix---trait-examples.html",
hmBreadCrumbs:"",
hmTitlePath:"Introduction > Appendix > Appendix I – Global Singletons",
hmHeader:"<h1 class=\"p_Heading1\" style=\"page-break-after: avoid;\"><span class=\"f_Heading1\">Ev6PteCache<\/span><\/h1>\n\r",
hmBody:"<p class=\"p_Normal\">How EV6 uses two DTB banks (“Pipe 0” and “Pipe 1”)<\/p>\n\r<p class=\"p_Normal\">✔ Why EV6 can walk PTEs in parallel with execution<\/p>\n\r<p class=\"p_Normal\">✔ How out-of-order core pipelines interact with TLBs<\/p>\n\r<p class=\"p_Normal\">✔ How PAL TB miss handlers interact with your Ev6PteCache design<\/p>\n\r<p class=\"p_Normal\">✔ How to trace a complete VA→PA translation in your emulator<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<div style=\"text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 0;\"><table style=\"border:none; border-spacing:0;\">\n\r<tr>\n\r<td style=\"vertical-align:top; width:11.5000rem; padding:0; border:none\"><p class=\"p_Normal\">ReservationManager<\/p>\n\r<\/td>\n\r<td style=\"vertical-align:top; width:75.9375rem; padding:0; border:none\"><p class=\"p_Normal\">ReservationManager::instance().clearAllReservations();Tru64 \/ EV6 guarantee: any translation invalidation kills reservations.These are triggered by IPR writes, PALcode calls, context switches, and inter-processor invalidation.<\/p>\n\r<\/td>\n\r<\/tr>\n\r<\/table>\n\r<\/div>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; color: #0000ff; background-color: #ffffff;\">onITB_IAWrite &nbsp; &nbsp; &nbsp; &nbsp;<\/span>InvalidateAll(PteRealm)<\/p>\n\r<p class=\"p_Normal\"><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; color: #0000ff; background-color: #ffffff;\">onITB_IAWrite &nbsp; &nbsp; &nbsp; &nbsp;<\/span>Is <span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; font-weight: bold; color: #000080; background-color: #ffffff;\">cpuState<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; background-color: #ffffff;\">-&gt;<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; background-color: #e0ffff;\">flushIPrefetchQueue<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; background-color: #ffffff;\">(); queue, is this a TLB - ITB?<\/span><\/p>\n\r<p class=\"p_Normal\"><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; color: #880000; background-color: #ffffff;\">onITB_ISWrite &nbsp; &nbsp; &nbsp; &nbsp;<\/span>Is <span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; font-weight: bold; color: #000080; background-color: #ffffff;\">cpuState<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; background-color: #ffffff;\">-&gt;<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; background-color: #e0ffff;\">flushIPrefetchQueue<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; background-color: #ffffff;\">();<\/span><\/p>\n\r<p class=\"p_Normal\"><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; color: #0000ff; background-color: #ffffff;\">onITB_ISWrite &nbsp; &nbsp; &nbsp; &nbsp;invalidateTBSingle(va,asn) for each Bank0\/1<\/span><\/p>\n\r<p class=\"p_Normal\"><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; color: #880000; background-color: #ffffff;\">onDTB_IAPWrite &nbsp; &nbsp; &nbsp; &nbsp;Invalidate DTB only<\/span><\/p>\n\r<p class=\"p_Normal\"><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; color: #0000ff; background-color: #ffffff;\">onDTB_PTEWrite &nbsp; &nbsp; &nbsp; &nbsp;verify the tlb.insert. &nbsp;&nbsp;<\/span><\/p>\n\r<p class=\"p_Normal\"><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; background-color: #e0ffff;\">TLBType&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;is not defined<\/span><\/p>\n\r<p class=\"p_Normal\"><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; color: #0000ff; background-color: #ffffff;\">onDTB_IAPWrite &nbsp; &nbsp; &nbsp; &nbsp;<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; background-color: #e0ffff;\">invalidateDTBByASN<\/span><\/p>\n\r<p class=\"p_Normal\"><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; color: #880000; background-color: #ffffff;\">onDTB_IAWrite &nbsp; &nbsp; &nbsp; &nbsp;invalidate DTB all only (select bank 1\/bank 2)&nbsp;<\/span><\/p>\n\r<p class=\"p_Normal\"><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; color: #880000; background-color: #ffffff;\">onDTB_IAWrite &nbsp; &nbsp; &nbsp; &nbsp;globalEv6PteCache<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; background-color: #ffffff;\">().invalidateAllDTB(<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; color: #0000ff; background-color: #ffffff;\">TLBType<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; background-color: #ffffff;\">::<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; color: #2f4f4f; background-color: #ffffff;\">DTB0<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; background-color: #ffffff;\">);<\/span><\/p>\n\r<p class=\"p_Normal\"><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; color: #880000; background-color: #ffffff;\">onDTB_IAWrite &nbsp; &nbsp; &nbsp; &nbsp;globalEv6PteCache<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; background-color: #ffffff;\">().invalidateAllDTB(<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; color: #0000ff; background-color: #ffffff;\">TLBType<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; background-color: #ffffff;\">::<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; color: #2f4f4f; background-color: #ffffff;\">DTB1<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; background-color: #ffffff;\">);<\/span><\/p>\n\r<p class=\"p_Normal\"><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; color: #880000; background-color: #ffffff;\">onDTB_ISWrite &nbsp; &nbsp; &nbsp; &nbsp;<\/span><\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; color: #880000; background-color: #ffffff;\">UnifiedDataCache(&quot;L2&quot;)?&nbsp;<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; color: #0000ff; background-color: #ffffff;\">if<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; background-color: #ffffff;\">&nbsp;(<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; font-weight: bold; color: #000080; background-color: #ffffff;\">cpuState<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; background-color: #ffffff;\">-&gt;<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; color: #880000; background-color: #ffffff;\">hasL2Cache<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; background-color: #ffffff;\">()) {<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; color: #008000; background-color: #ffffff;\">\/\/ TODO<\/span><\/p>\n\r<p class=\"p_Normal\"><span style=\"width:3.0000rem;display:inline-block\">&nbsp;<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; font-weight: bold; color: #000080; background-color: #ffffff;\">cpuState<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; background-color: #ffffff;\">-&gt;<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; color: #880000; background-color: #ffffff;\">flushL2Cache<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; background-color: #ffffff;\">();<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; color: #008000; background-color: #ffffff;\">\/\/ TODO<\/span><\/p>\n\r<p class=\"p_Normal\"><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; background-color: #ffffff;\">}<\/span><\/p>\n\r<p class=\"p_Normal\"><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; background-color: #ffffff;\">IRQController:: &nbsp; &nbsp; &nbsp; &nbsp;<\/span><span style=\"font-size: 0.82rem; font-family: \'Cascadia Mono\'; color: #880000; background-color: #ffffff;\">clearHardwareInterrupts<\/span><\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r"
})
