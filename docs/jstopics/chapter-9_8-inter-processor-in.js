hmLoadTopic({
hmKeywords:"",
hmTitle:"9.8 TLB Shootdown",
hmDescription:"9.8.1 Why Shootdowns Are Required  When a CPU modifies page tables, other CPUs may have stale TLB entries mapping the old translations. Without invalidation, memory safety would",
hmPrevLink:"chapter-9_7-reservation-invali.html",
hmNextLink:"chapter-9_9-tlb-shootdown.html",
hmParentLink:"chapter9-smparchitecture.html",
hmBreadCrumbs:"<a href=\"license-_-attributions.html\">ASA-EMulatR Reference Guide<\/a> &gt; <a href=\"index.html\">Introduction<\/a> &gt; <a href=\"architecture-overview.html\">Architecture Overview<\/a> &gt; <a href=\"chapter9-smparchitecture.html\">Chapter 9 - SMP Architecture<\/a>",
hmTitlePath:"ASA-EMulatR Reference Guide > Introduction > Architecture Overview > Chapter 9 - SMP Architecture > 9.8 TLB Shootdown",
hmHeader:"<h1 class=\"p_Heading1\" style=\"page-break-after: avoid;\"><span class=\"f_Heading1\">9.8 TLB Shootdown<\/span><\/h1>\n\r",
hmBody:"<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">9.8.1 Why Shootdowns Are Required<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">When a CPU modifies page tables, other CPUs may have stale TLB entries mapping the old translations. Without invalidation, memory safety would be violated — stale entries could allow access to freed pages, bypass permission changes, or map incorrect physical addresses.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">9.8.2 Shootdown Sequence<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 1.2500rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"display:inline-block;width:1.2500rem;margin-left:-1.2500rem\">1.<\/span>Initiating CPU updates page table entries in GuestMemory<\/p>\n\r<p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 1.2500rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"display:inline-block;width:1.2500rem;margin-left:-1.2500rem\">2.<\/span>Initiating CPU sends TLB invalidation IPIs to other CPUs — IPICommand selects the invalidation scope: TLB_INVALIDATE_VA_ITB, TLB_INVALIDATE_VA_DTB, TLB_INVALIDATE_VA_BOTH, TLB_INVALIDATE_ASN, or TLB_INVALIDATE_ALL. For VA-specific invalidations, the VA is encoded in the IPI data via encodeIPIWithVA().<\/p>\n\r<p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 1.2500rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"display:inline-block;width:1.2500rem;margin-left:-1.2500rem\">3.<\/span>Target CPUs receive the IPI via checkInterrupts(), enter PAL, and call handleTLBShootdownIPI() which decodes the IPICommand and performs the appropriate TLB invalidation on the local ITB\/DTB<\/p>\n\r<p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 1.2500rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"display:inline-block;width:1.2500rem;margin-left:-1.2500rem\">4.<\/span>Target CPUs acknowledge completion<\/p>\n\r<p class=\"p_Normal\" style=\"text-indent: 0; padding-left: 1.2500rem; margin-left: 0;\"><span class=\"f_Normal\" style=\"display:inline-block;width:1.2500rem;margin-left:-1.2500rem\">5.<\/span>Initiating CPU waits for acknowledgments, then resumes<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">Shootdowns are serialized operations — the initiating CPU stalls until all targets have acknowledged.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_SeeAlso\" style=\"page-break-after: avoid;\"><span class=\"f_SeeAlso\">See Also: cpuCoreLib\/AlphaCPU.h (handleTLBShootdownIPI).<\/span><\/p>\n\r"
})
