hmLoadTopic({
hmKeywords:"",
hmTitle:"15.12 Diagnostics and DMA Coherency",
hmDescription:"15.12.1 Diagnostic Hooks  GuestMemory provides classifyPhysicalAddress(pa) which returns a human-readable string identifying the subsystem and offset for any PA. The...",
hmPrevLink:"15_11-memory-fault-handling.html",
hmNextLink:"15_13-architectural-invariants.html",
hmParentLink:"chapter-15---memory-system-imp.html",
hmBreadCrumbs:"<a href=\"index.html\">Introduction<\/a> &gt; <a href=\"architecture-overview.html\">Architecture Overview<\/a> &gt; <a href=\"chapter-15---memory-system-imp.html\">Chapter 15 – Memory System Implementation Details<\/a>",
hmTitlePath:"Introduction > Architecture Overview > Chapter 15 – Memory System Implementation Details > 15.12 Diagnostics and DMA Coherency",
hmHeader:"<h1 class=\"p_Heading1\" style=\"page-break-after: avoid;\"><span class=\"f_Heading1\">15.12 Diagnostics and DMA Coherency<\/span><\/h1>\n\r",
hmBody:"<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">15.12.1 Diagnostic Hooks<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">GuestMemory provides <span class=\"f_CodeExample\">classifyPhysicalAddress(pa)<\/span> which returns a human-readable string identifying the subsystem and offset for any PA. The <span class=\"f_CodeExample\">SparseMemoryBacking<\/span> exposes <span class=\"f_CodeExample\">allocatedBytes()<\/span>, <span class=\"f_CodeExample\">residentBytes()<\/span>, <span class=\"f_CodeExample\">pageCount()<\/span>, and <span class=\"f_CodeExample\">allocatedPageCount()<\/span> for memory pressure monitoring. The <span class=\"f_CodeExample\">WriteBufferManager<\/span> provides <span class=\"f_CodeExample\">getPendingWriteCount(cpuId)<\/span> and <span class=\"f_CodeExample\">hasPendingWrites(cpuId)<\/span> for write buffer inspection. The <span class=\"f_CodeExample\">MemoryBarrierCoordinator<\/span> provides <span class=\"f_CodeExample\">getBarrierStatus()<\/span> for SMP debugging.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">These hooks must not affect architectural behavior, must not introduce ordering, and are observational only.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<hr style=\"height:1px; color:#000000; border-width:0; background-color:#000000;\" \/><p class=\"p_Normal\">&nbsp;<\/p>\n\r<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">15.12.2 DMA Coherency<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">GuestMemory provides <span class=\"f_CodeExample\">notifyDMAWriteComplete(pa, size)<\/span> as a coherency notification point. When a DMA transfer completes a write to physical memory, this method is called to allow cache invalidation and reservation breaking. The <span class=\"f_CodeExample\">AccessKind<\/span> enumeration distinguishes <span class=\"f_CodeExample\">DMARead<\/span> and <span class=\"f_CodeExample\">DMAWrite<\/span> from CPU-initiated accesses.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_SeeAlso\" style=\"page-break-after: avoid;\"><span class=\"f_SeeAlso\">See Also: memoryLib\/FirmwareDeviceManager.h (~540 lines) – Firmware device management and DMA coordination.<\/span><\/p>\n\r"
})
