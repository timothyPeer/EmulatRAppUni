hmLoadTopic({
hmKeywords:"",
hmTitle:"16.6 Tape Drive Emulation and Format Variants",
hmDescription:"16.6.1 Virtual Tape Architecture  ASA-EmulatR emulates SCSI tape drives via the SCSITape class, which presents standard sequential-access SCSI semantics to the guest OS. The...",
hmPrevLink:"16_5-scsi-subsystem.html",
hmNextLink:"16_7-network-and-fibre-channel.html",
hmParentLink:"chapter-16---device-model--dma.html",
hmBreadCrumbs:"<a href=\"index.html\">Introduction<\/a> &gt; <a href=\"architecture-overview.html\">Architecture Overview<\/a> &gt; <a href=\"chapter-16---device-model--dma.html\">Chapter 16 – Device Model &amp; DMA<\/a>",
hmTitlePath:"Introduction > Architecture Overview > Chapter 16 – Device Model & DMA > 16.6 Tape Drive Emulation and Format Variants",
hmHeader:"<h1 class=\"p_Heading1\" style=\"page-break-after: avoid;\"><span class=\"f_Heading1\">16.6 Tape Drive Emulation and Format Variants<\/span><\/h1>\n\r",
hmBody:"<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">16.6.1 Virtual Tape Architecture<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">ASA-EmulatR emulates SCSI tape drives via the <span class=\"f_CodeExample\">SCSITape<\/span> class, which presents standard sequential-access SCSI semantics to the guest OS. The guest sees a tape device that responds to SCSI tape commands (READ, WRITE, WRITE_FILEMARKS, SPACE, REWIND, ERASE, LOAD\/UNLOAD) and maintains tape position state (BOT, EOT, file mark positions, block count).<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">On the host side, the virtual tape is backed by a disk file that stores tape data in a structured container format. ASA-EmulatR supports two — and possibly three — variant formats for guest virtual tape to disk storage:<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<hr style=\"height:1px; color:#000000; border-width:0; background-color:#000000;\" \/><p class=\"p_Normal\">&nbsp;<\/p>\n\r<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">16.6.2 Supported Tape Container Formats<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><span style=\"font-weight: bold;\">Format 1: SIMH .TAP<\/span> — The widely-used SIMH tape image format. Each tape record is prefixed with a 4-byte little-endian record length header, followed by the record data, followed by a duplicate 4-byte length trailer. File marks are encoded as a zero-length record (4 bytes of 0x00000000). End of medium is encoded as two consecutive file marks. This format is portable across emulator platforms (SIMH, Hercules, and others) and is the primary interchange format for guest operating system installation media.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><span style=\"font-weight: bold;\">Format 2: TPC (Tape Position Control)<\/span> — An extended tape container format that adds metadata capabilities beyond SIMH .TAP. TPC format includes a file header with tape geometry and density information, per-record metadata (timestamps, write pass identifiers), and support for variable-length records with explicit block size tracking. TPC provides better fidelity for tape operations that inspect or manipulate tape medium properties, such as MODE_SENSE\/MODE_SELECT for tape density and compression parameters.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\"><span style=\"font-weight: bold;\">Format 3: VTape (under evaluation)<\/span> — A potential third format under consideration that would provide a more compact representation with optional compression and sparse block allocation. VTape would target large virtual tape libraries where storage efficiency matters. This format is not yet committed and may be adopted or deferred based on guest OS compatibility testing.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<hr style=\"height:1px; color:#000000; border-width:0; background-color:#000000;\" \/><p class=\"p_Normal\">&nbsp;<\/p>\n\r<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">16.6.3 Format Selection and Tape Operations<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">The tape container format is selected per device instance in <span class=\"f_CodeExample\">ASA-EmulatR.ini<\/span> and is detected by the <span class=\"f_CodeExample\">SCSITape<\/span> class at device initialization by inspecting the file header. All tape operations — read, write, space, rewind — are translated into host-side file seek and read\/write operations against the container file, with the container format handling record framing and file mark encoding.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">The guest OS is unaware of the host-side container format. It sees a standard SCSI sequential-access device responding to standard SCSI tape commands. The container format is an emulator implementation detail that affects only host-side storage layout and interoperability with other emulator platforms.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_SeeAlso\" style=\"page-break-after: avoid;\"><span class=\"f_SeeAlso\">See Also: deviceLib\/SCSITape.h – Virtual tape device implementation; deviceLib\/SCSI_helpers.h – SCSI command definitions.<\/span><\/p>\n\r"
})
