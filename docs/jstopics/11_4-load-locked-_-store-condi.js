hmLoadTopic({
hmKeywords:"",
hmTitle:"11.4 Load-Locked \/ Store-Conditional Invariants",
hmDescription:"11.4.1 Reservation Model  LL\/SC uses reservations, not locks. Reservations are per-CPU, cache-line granular (64 bytes), optimistic, and non-blocking. No mutex semantics exist.",
hmPrevLink:"11_3-memory-model-invariants.html",
hmNextLink:"11_5-privilege-and-pal-invaria.html",
hmParentLink:"chapter-11---architectural-inv.html",
hmBreadCrumbs:"<a href=\"index.html\">Introduction<\/a> &gt; <a href=\"architecture-overview.html\">Architecture Overview<\/a> &gt; <a href=\"chapter-11---architectural-inv.html\">Chapter 11 - Architectural Invariants<\/a>",
hmTitlePath:"Introduction > Architecture Overview > Chapter 11 - Architectural Invariants > 11.4 Load-Locked \/ Store-Conditional Invariants",
hmHeader:"<h1 class=\"p_Heading1\" style=\"page-break-after: avoid;\"><span class=\"f_Heading1\">11.4 Load-Locked \/ Store-Conditional Invariants<\/span><\/h1>\n\r",
hmBody:"<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">11.4.1 Reservation Model<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">LL\/SC uses reservations, not locks. Reservations are per-CPU, cache-line granular (64 bytes), optimistic, and non-blocking. No mutex semantics exist.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">Enforced by: ReservationManager with one CPUReservation slot per CPU, cache-line-aligned physical address matching.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<hr style=\"height:1px; color:#000000; border-width:0; background-color:#000000;\" \/><p class=\"p_Normal\">&nbsp;<\/p>\n\r<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">11.4.2 Reservation Lifetime<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">A CPU may hold at most one reservation. Reservations are cleared on: any store to the same cache line (local or remote, via breakReservationsOnCacheLine()), MB\/EXCB where required, PAL entry or exit, exception or interrupt delivery, and context switch. Reservations never survive privilege boundaries.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">Enforced by: ReservationManager::breakReservation(cpuId) called from enterPal(), executeREI(), FaultDispatcher delivery path. breakReservationsOnCacheLine() scans all CPUs on every store commit in WB.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<hr style=\"height:1px; color:#000000; border-width:0; background-color:#000000;\" \/><p class=\"p_Normal\">&nbsp;<\/p>\n\r<h2 class=\"p_Heading2\" style=\"page-break-after: avoid;\"><span class=\"f_Heading2\">11.4.3 Store-Conditional Semantics<\/span><\/h2>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">ST*_C must: succeed only if reservation is valid, fail otherwise, and clear the reservation regardless of outcome. No retries are implicit.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">Enforced by: MBox::executeSTL_C()\/STQ_C() check ReservationManager::checkReservation(cpuId, pa), write R_a = 1 (success) or R_a = 0 (failure), always call clearReservation(cpuId).<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_SeeAlso\" style=\"page-break-after: avoid;\"><span class=\"f_SeeAlso\">See Also: <a href=\"chapter-5_11-load-locked-_-sto.html\" class=\"topiclink\">5.11 Load-Locked \/ Store-Conditional (LL\/SC)<\/a>; <a href=\"chapter-8_11-pal-and-ll_sc.html\" class=\"topiclink\">8.11 PAL and LL\/SC Reservations<\/a>.<\/span><\/p>\n\r"
})
