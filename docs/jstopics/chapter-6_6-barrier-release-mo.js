hmLoadTopic({
hmKeywords:"",
hmTitle:"6.6 Barrier Release Model",
hmDescription:"A stalled barrier is released only when its release conditions are satisfied. Barrier release is evaluated once per cycle by the pipeline.",
hmPrevLink:"chapter-6_5-pipeline-level-beh.html",
hmNextLink:"chapter-6_7-mb---full-memory-b.html",
hmParentLink:"chapter-6---serialization-and-.html",
hmBreadCrumbs:"<a href=\"index.html\">Introduction<\/a> &gt; <a href=\"architecture-overview.html\">Architecture Overview<\/a> &gt; <a href=\"chapter-6---serialization-and-.html\">Chapter 6 - Serialization and Stall Model<\/a>",
hmTitlePath:"Introduction > Architecture Overview > Chapter 6 - Serialization and Stall Model > 6.6 Barrier Release Model",
hmHeader:"<h1 class=\"p_Heading1\" style=\"page-break-after: avoid;\"><span class=\"f_Heading1\">6.6 Barrier Release Model<\/span><\/h1>\n\r",
hmBody:"<p class=\"p_Normal\">A stalled barrier is released only when its release conditions are satisfied. Barrier release is evaluated once per cycle by the pipeline.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">The release mechanism operates through the advance() helper in AlphaPipeline, which is called when the barrier slot is ready to proceed:<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">\/\/&nbsp;AlphaPipeline::advance()&nbsp;-&nbsp;barrier&nbsp;release<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">if&nbsp;(slot.needsWriteBufferDrain)&nbsp;{<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;m_cBox-&gt;drainWriteBuffers(&amp;slot);<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;slot.needsWriteBufferDrain&nbsp;=&nbsp;false;<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">}<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">if&nbsp;(slot.needsMemoryBarrier)&nbsp;{<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;m_cBox-&gt;RequestMemoryBarrier(slot,&nbsp;slot.barrierKind);<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;slot.needsMemoryBarrier&nbsp;=&nbsp;false;<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">}<\/span><\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">For EXCB barriers, the release logic uses checkBarrierRelease(), which verifies that all prior stages are clear and no pending events exist:<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">\/\/&nbsp;AlphaPipeline::checkBarrierRelease()<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">if&nbsp;(slot.serializeType&nbsp;==&nbsp;SerializationType::Barrier_EXC)&nbsp;{<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;bool&nbsp;allClear&nbsp;=&nbsp;true;<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;for&nbsp;(int&nbsp;j&nbsp;=&nbsp;0;&nbsp;j&nbsp;&lt;&nbsp;slot.currentStage;&nbsp;++j)&nbsp;{<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;if&nbsp;(stage(j).valid)&nbsp;allClear&nbsp;=&nbsp;false;<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;}<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;if&nbsp;(allClear&nbsp;&amp;&amp;&nbsp;!slot.m_faultDispatcher-&gt;eventPending())&nbsp;{<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;slot.stalled&nbsp;=&nbsp;false;&nbsp;\/\/&nbsp;Release!<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">&nbsp;}<\/span><\/p>\n\r<p class=\"p_CodeExample\"><span class=\"f_CodeExample\">}<\/span><\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_Normal\">When released, slot.stalled is cleared, the barrier advances through MEM and WB normally, and frontend fetch resumes.<\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<p class=\"p_SeeAlso\" style=\"page-break-after: avoid;\"><span class=\"f_SeeAlso\">See Also: cpuCoreLib\/AlphaPipeline.h (checkBarrierRelease, advance).<\/span><\/p>\n\r"
})
