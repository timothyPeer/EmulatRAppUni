<!DOCTYPE html>
<html>
<head>
   <title>Introduction &gt; Architecture Overview &gt; Chapter 16 – Device Model &amp; DMA</title>
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />   
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta name="description" content="This chapter describes the implementation of the ASA-EmulatR device subsystem: how devices are constructed, differentiated, routed through MMIO, threaded for asynchronous I/O,..." />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <link type="text/css" href="custom.css" rel="stylesheet" />

   <style TYPE="text/css" media="screen"> 
      html, body { margin:0; 
        padding:0; 
        background: #ffffff; 
      } 
      div#printheader { display: none; }
      #idheader { 
        width:100%; 
        height:auto; 
        padding: 0; 
        margin: 0;
        position: fixed;
        top: 0;
        z-index: 2;
      } 
      /* The "min-height" for "#idheader table" ensures that the (blue) header of the topic
         has at least the same height as the header of the navigation panel left of it */
      #idheader table { background: #2C5D88; min-height: 59px }             
      #idheader h1 { color: #FFF }     
      #idnav {
        text-align: right;
        width: 126px;
        vertical-align: middle;        
      } 
      #idnav a { text-decoration: none }
      #idnav span {
        display: inline-block;
        width: 24px;
        height: 24px;
        margin-left: 4px;
        background:url('hm_webhelp_buttons_grey.png') top left no-repeat;
      } 
      #idnav a span {
        background-image:url('hm_webhelp_buttons_white.png');
      } 
      #idnav a span:hover {
        background-image:url('hm_webhelp_buttons_orange.png');
      } 
      #idnav span.hmbtnprev { background-position: 0 -32px }
      #idnav span.hmbtnnext { background-position: -24px -32px }
      #idnav span.hmbtntop  { background-position: -48px -32px }
      #idnav span.hmbtntoggle  { width: 20px; background-position: -70px -32px }
      #idnav span.hmbtnprint  { background-position: -88px -32px }

      #callout-table, #overview-table {display:block; position:relative; top:0; left:0;}
      #callout-icon {display:block; position:absolute; top:-11px; left:-11px;}
      #callout-icon-flag {display:block; position:absolute; top:-11px; left:-8px;}
      #callout-table a {text-decoration: none; color: blue;}
      #callout-table a:visited {text-decoration: none; color: blue;}
      #overview-table a {text-decoration: none; color: black;}
      #overview-table a:visited {text-decoration: none; color: black;}
      #callout-table a:hover, #overview-table a:hover {text-decoration: underline;}       
      p.help-url { margin: 20px 0 5px 0; text-align: center; font-size: 80%; text-decoration: none }      
      #switchtoggles { text-align: right; padding: 0 2px 0 0; font-size: 90%; } 
      .sync-toc { color: #FFF; font-size: 8pt; font-weight: bold; display: none; }
      .sync-toc a { color: #FFF; text-decoration: none; font-weight: bold;}
      .sync-toc a:visited { color: #FFF; }
      .sync-toc a:hover { text-decoration: underline; }
      a.hmanchor { display: inline-block; margin-top: -4em; padding-top: 4em }	  
   </style>
   <style TYPE="text/css" media="print">
      div#idheader, img.dropdown-toggle-icon, p.help-url { display:none } 
   </style>
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "chapter-16---device-model--dma.html");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>


<div id="printheader"><h1 class="p_Heading1" style="page-break-after: avoid;"><span class="f_Heading1">Chapter 16 – Device Model &amp; DMA</span></h1>
</div>
<div id="idheader">
<div id="idheaderbg">
<table style="width:100%;border:none;margin:0px;" cellspacing="0" cellpadding="0"> 
  <tr>
    <td class="topichead" style="text-align:left; vertical-align:bottom">
      <p class="sync-toc">&lt;&lt; <a rel="nofollow" href="index.html?chapter-16---device-model--dma.html" target="_top">Click to Display Table of Contents</a> &gt;&gt;</p>
      <p class="crumbs"><b>Navigation:</b>&nbsp;
      
      <a href="introduction.html">Introduction</a> &gt; <a href="architecture-overview.html">Architecture Overview</a>&nbsp;&gt;</p>
   
      <h1 class="p_Heading1" style="page-break-after: avoid;"><span class="f_Heading1">Chapter 16 – Device Model &amp; DMA</span></h1>

    </td>
    <td class="topichead" id="idnav">
      
      <a href="15_14-repository-directory-map.html" title="Previous Topic"><span class="hmbtnprev"></span></a>
      <a href="architecture-overview.html" title="Parent Chapter"><span class="hmbtntop"></span></a>
      <a href="16_1-device-differentiation-an.html" title="Next Topic"><span class="hmbtnnext"></span></a>
      
    </td>
  </tr>  
</table>
</div>
</div>  

<div id="idcontent"><div id="innerdiv">
<!-- Ask Internet Explorer 6.users to update their obsolete and dangerous browser --> 
<!--[if lt IE 7]><div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;'><a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode"><img src="http://storage.ie6countdown.com/assets/100/images/banners/warning_bar_0000_us.jpg" border="0" height="42" width="820" alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today." /></a></div><![endif]-->

<!--ZOOMRESTART-->
<p class="p_Normal">This chapter describes the implementation of the ASA-EmulatR device subsystem: how devices are constructed, differentiated, routed through MMIO, threaded for asynchronous I/O, and integrated with DMA and interrupt delivery. Where Chapter 10 defines the architectural contract — MMIO is strongly ordered, devices are asynchronous, completion is interrupt-driven — this chapter describes the concrete classes, managers, threading model, storage backends, and bus topologies that deliver those guarantees.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span style="font-weight: bold;">Implementation Status:</span> The device and DMA subsystem is a work in progress. The MMIO dispatch engine (<span class="f_CodeExample">MMIOManager</span>), device registration catalog (<span class="f_CodeExample">DeviceCatalog</span>, <span class="f_CodeExample">DeviceTemplate</span>), DMA coherency manager (<span class="f_CodeExample">DMACoherencyManager</span>), and IRQ integration infrastructure are structurally complete and represent approximately 1,800 lines of production header code. The <span class="f_CodeExample">IDeviceEmulator</span> interface contract is stable. Individual device emulators — SCSI disk, SCSI tape, network adapters, Fibre Channel storage, IDE controllers — are at varying stages of implementation. The interfaces are designed for incremental plug-in: each device manager can be developed, tested, and attached independently without modifying the core MMIO or interrupt infrastructure.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span style="font-weight: bold;">Estimated Structural Readiness:</span> The MMIO routing layer, device template system, and interrupt signaling path are ready for device integration. The DMA coherency path (TX flush, RX invalidation, LL/SC reservation breaking) is implemented but requires validation under multi-device SMP load. Individual device emulators should be considered scaffolded — the interface contracts exist, the managers are instantiable, but full behavioral fidelity to Alpha hardware device protocols is ongoing. The system is designed so that new devices can be plugged into the existing infrastructure via <span class="f_CodeExample">DeviceCatalog</span> registration and <span class="f_CodeExample">MMIOManager</span> region binding without changes to the pipeline, memory system, or interrupt delivery paths.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal"><span style="font-weight: bold;">Scope:</span> This chapter covers device differentiation, MMIO routing implementation, endianness handling, asynchronous I/O threading, storage backends (including tape format variants), DMA implementation, and the current IRQ integration architecture. It does not cover TLB or address translation (Chapter 17) or fault dispatch mechanics (Chapter 18).</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_SeeAlso" style="page-break-after: avoid;"><span class="f_SeeAlso">See Also: <a href="chapter-10---devices-and-mmio.html" class="topiclink">Chapter 10 – Devices and Memory-Mapped I/O (MMIO)</a> (architectural contract); <a href="chapter-15---memory-system-imp.html" class="topiclink">Chapter 15 – Memory System Implementation Details</a> (GuestMemory PA routing, MMIO access semantics); <a href="chapter-14---execution-domains.html" class="topiclink">Chapter 14 – Execution Domains (“Boxes”)</a> &nbsp;(MBox, CBox device interaction).</span></p>

<!--ZOOMSTOP-->
</div></div>
<script type="text/javascript">

  

  $(document).ready(function(){
    $(window).bind('resize', function() {
      var y = $('#idheader').height(); 
      $('#idcontent').css('margin-top', y);
      var par = window.parent;
      if ($( par ).width() <= $( window ).width()+20) {
        $('#idheader').css('position', 'relative');
        $('#idcontent').css('margin-top', 0);
        $('#idbacktotop').css('display', 'block');
        $('.hmanchor').css('margin-top', -20);
	$('.hmanchor').css('padding-top', 20);
      }
      else {
        $('#idheader').css('position', 'fixed');
        $('#idcontent').css('margin-top', $('#idheader').height());
        $('#idbacktotop').css('display', 'none');
        $('.hmanchor').css('margin-top', -y-20);
	$('.hmanchor').css('padding-top', y+20);
      }
    });
    
    $(window).resize(); //trigger event for initially small displays
  });

if ((!parent.hmNavigationFrame) && (parent.location) && (parent.location.href)) { $('.sync-toc').show();$('p.crumbs').hide();}

</script>
</body>
</html>
